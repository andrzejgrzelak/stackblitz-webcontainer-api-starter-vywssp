{"version":3,"file":"static/js/6631.4470e64b.chunk.js","mappings":"4TAaO,SAASA,EAAYC,GAC1B,IAAMC,GAA0BC,EAAAA,EAAAA,GAAA,GAAQF,GACtCC,EAAEE,OAAoB,EACxBF,EAAEG,OAAS,CAAE,IAAK,EAAG,KAAM,EAAG,IAAK,EAAG,SAAKC,GAAYL,EAAKI,QAC5DH,EAAEK,MAAQC,OAAOP,EAAKQ,OACtBP,EAAEQ,QAAUT,EAAKU,SACE,OAAfV,EAAKW,cACAV,EAAEU,MAEQ,OAAfX,EAAKQ,cACAP,EAAEU,MAYX,IAVA,IAAMC,EAAgB,IAAIC,IAAI,CAC5B,QACA,MACA,WACA,QACA,cACA,SACA,QACA,WAEFC,EAAA,EAAAC,EAAgBC,OAAOC,KAAKjB,EAAKkB,YAAWJ,EAAAC,EAAAI,OAAAL,IAAE,CAAzC,IAAMM,EAACL,EAAAD,GACNO,EAAID,EAAEE,cAMV,GALIV,EAAcW,IAAIF,KAGpBA,GAAK,KAEoB,OAAvBrB,EAAKkB,WAAWE,GAAa,CAC/B,IAAII,EAAOxB,EAAKkB,WAAWE,GAC3B,GAAIK,MAAMC,QAAQF,IAAyB,IAAhBA,EAAKL,OAAc,CAE5C,IAAMQ,EAAgBH,EAAK,GAAGI,QAAQ,SAAU,IAChDJ,EAAOG,CACT,CACA1B,EAAEoB,GAAKG,CACT,CACF,CAwBA,OAvBAvB,EAAEQ,QAAUR,EAAES,SACdT,EAAE4B,KAAO5B,EAAE6B,YAGP9B,EAAK+B,gBAAkB/B,EAAK+B,eAAeZ,OAAS,IACtDlB,EAAE+B,YAAchC,EAAK+B,eAAeE,SAAQ,SAAAC,GAAS,OACnDA,EAAUC,KAAI,SAAAC,GAAQ,OAAIrC,EAAYqC,EAAS,GAAC,YAI7CnC,EAAE8B,sBACF9B,EAAED,YACFC,EAAEoC,wBAEFpC,EAAEqC,iBACFrC,EAAEiB,kBACFjB,EAAES,gBACFT,EAAE6B,mBACF7B,EAAEO,MAELP,EAAEsC,gBACJtC,EAAEuC,KAAOvC,EAAEsC,eAENtC,CACT,CC7DA,SAASwC,EAAOC,GACd,OAAkB,KAAXA,EAAI,IAAwB,MAAXA,EAAI,IAAyB,IAAXA,EAAI,EAChD,CAAC,IAAAC,EAAA,SAAAC,IAAAC,EAAAA,EAAAA,GAAAF,EAAAC,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAJ,GAAA,SAAAA,IAAA,IAAAK,GAAAC,EAAAA,EAAAA,GAAA,KAAAN,GAAA,QAAAO,EAAAC,UAAAhC,OAAAiC,EAAA,IAAA3B,MAAAyB,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAD,EAAAC,GAAAF,UAAAE,GASO,OATPL,EAAAF,EAAAQ,KAAAC,MAAAT,EAAA,OAAAU,OAAAJ,KAGWK,iBAAW,EAAAT,EAIXU,cAEN,CAAC,EAACV,CAAA,CAsGmC,OAtGnCW,EAAAA,EAAAA,GAAAhB,EAAA,EAAAiB,IAAA,YAAAC,MAAA,eAAAC,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAEN,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAA3B,EAAA1C,EAAAsE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAjE,EAAAkE,EAAAxB,UAAA,OAAAa,EAAAA,EAAAA,KAAAY,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAC4C,OADpBZ,EAAiBQ,EAAAxD,OAAA,QAAAd,IAAAsE,EAAA,GAAAA,EAAA,GAAG,CAAC,EACrCP,EAASY,KAAKC,QAAQ,eAAcJ,EAAAE,KAAA,GACrBG,EAAAA,EAAAA,cAAad,EAAQY,KAAKG,eAAeC,SAASjB,GAAK,OAAhE,IAEA1B,EAFN4B,EAAMQ,EAAAQ,MAEc,CAAAR,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,GAASO,EAAAA,EAAAA,OAAMjB,GAAO,OAAAQ,EAAAU,GAAAV,EAAAQ,KAAAR,EAAAE,KAAA,iBAAAF,EAAAU,GAAGlB,EAAM,QAAhD,MAAH3B,EAAGmC,EAAAU,IAEDpE,OAAS,WAAW,CAAA0D,EAAAE,KAAA,eACpB,IAAIS,MAAM,8CAA6C,QAEzDxF,EAAO,IAAIyF,YAAY,OAAQ,CAAEC,OAAO,IAAQC,OAAOjD,GAEvD4B,EAAQtE,EACX4F,MAAM,cACNC,QAAO,SAAA5F,GAAC,QAAMA,IAAMA,EAAE6F,WAAW,IAAI,IAClCvB,EAAQ,CAAC,EACNC,EAAI,EAAE,KAAD,QAAEA,EAAIF,EAAMnD,QAAM,CAAA0D,EAAAE,KAAA,SACT,KAAfN,EAAOH,EAAME,IACVsB,WAAW,KAAK,CAADjB,EAAAE,KAAA,gBAAAF,EAAAkB,OAAA,uBAGlBrB,EAAMD,EAAKuB,QAAQ,MACnBvF,EAAUgE,EAAKwB,MAAM,EAAGvB,GACzBH,EAAM9D,KACT8D,EAAM9D,GAAW,IAEnB8D,EAAM9D,GAASyF,KAAK5B,EAAME,IAAG,QAVGA,IAAGK,EAAAE,KAAA,wBAAAF,EAAAkB,OAAA,SAa9B,CAAExB,MAAAA,IAAO,yBAAAM,EAAAsB,OAAA,GAAAjC,EAAA,UACjB,yBAAAJ,EAAAP,MAAA,KAAAJ,UAAA,EA/BK,IA+BL,CAAAS,IAAA,WAAAC,MAAA,eAAAuC,GAAArC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAED,SAAAoC,IAAA,IAAAlC,EAAAmC,EAAA,KAAAC,EAAApD,UAAA,OAAAa,EAAAA,EAAAA,KAAAY,MAAA,SAAA4B,GAAA,cAAAA,EAAA1B,KAAA0B,EAAAzB,MAAA,OAMG,OANoBZ,EAAiBoC,EAAApF,OAAA,QAAAd,IAAAkG,EAAA,GAAAA,EAAA,GAAG,CAAC,EACrCvB,KAAKvB,cACRuB,KAAKvB,YAAcuB,KAAKyB,UAAUtC,GAAMuC,OAAM,SAAAC,GAE5C,MADAL,EAAK7C,iBAAcpD,EACbsG,CACR,KACDH,EAAAT,OAAA,SAEMf,KAAKvB,aAAW,wBAAA+C,EAAAL,OAAA,GAAAE,EAAA,UACxB,yBAAAD,EAAA7C,MAAA,KAAAJ,UAAA,EAXA,IAWA,CAAAS,IAAA,cAAAC,MAAA,eAAA+C,GAAA7C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAED,SAAA4C,IAAA,IAAA1C,EAAA2C,EAAAvC,EAAAwC,EAAA5D,UAAA,OAAAa,EAAAA,EAAAA,KAAAY,MAAA,SAAAoC,GAAA,cAAAA,EAAAlC,KAAAkC,EAAAjC,MAAA,OAA+C,OAAtBZ,EAAiB4C,EAAA5F,OAAA,QAAAd,IAAA0G,EAAA,GAAAA,EAAA,GAAG,CAAC,EAACC,EAAAjC,KAAA,EACrBC,KAAKiC,SAAS9C,GAAK,OAA9B,OAA8B2C,EAAAE,EAAA3B,KAAnCd,EAAKuC,EAALvC,MAAKyC,EAAAjB,OAAA,SACN/E,OAAOC,KAAKsD,IAAM,wBAAAyC,EAAAb,OAAA,GAAAU,EAAA,UAC1B,yBAAAD,EAAArD,MAAA,KAAAJ,UAAA,EALA,IAKA,CAAAS,IAAA,gCAAAC,MAAA,eAAAqD,GAAAnD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAED,SAAAkD,EAA4C1G,GAAe,IAAA2G,EAAA7C,EAAAD,EAAAtE,EAAAqH,EAAAC,EAAA9C,EAAA+C,EAAAC,EAAA,YAAAxD,EAAAA,EAAAA,KAAAY,MAAA,SAAA6C,GAAA,cAAAA,EAAA3C,KAAA2C,EAAA1C,MAAA,cAAA0C,EAAA1C,KAAA,EACjCC,KAAKiC,WAAU,OACX,GADWG,EAAAK,EAAApC,KAA/Bd,EAAK6C,EAAL7C,MACFD,EAAQC,EAAM9D,GACT,CAADgH,EAAA1C,KAAA,eAAA0C,EAAA1B,OAAA,cACD1F,GAAS,OAkBlB,IAhBML,EAAO0H,EAAAA,EAAAA,gBAAoBpD,EAAMqD,KAAK,MAAO,CACjDC,eAAe,EACfC,eAAe,EACfC,iBAAiB,EACjBC,gBAAgB,IAGZV,EAAe,IAAIW,EAAAA,GACnBV,EAAMtH,EAAKiI,OAAO9F,KACtB,SAAClC,EAAGuE,GAAC,OACH,IAAI0D,EAAAA,cAAc,CAChBlI,KAAMD,EAAYE,GAClBkI,GAAG,GAAD3E,OAAKgE,EAAKW,GAAE,KAAA3E,OAAI/C,EAAO,KAAA+C,OAAIgB,IAC7B,IAGGA,EAAI,EAAGA,EAAI8C,EAAInG,OAAQqD,IACxB+C,EAAMD,EAAI9C,GAChB6C,EAAae,OAAO,CAACb,EAAIc,IAAI,SAAUd,EAAIc,IAAI,QAASd,GACzD,OAAAE,EAAA1B,OAAA,SACMsB,GAAY,yBAAAI,EAAAtB,OAAA,GAAAgB,EAAA,UACpB,gBAAAmB,GAAA,OAAApB,EAAA3D,MAAA,KAAAJ,UAAA,EA7BA,IA6BA,CAAAS,IAAA,0BAAAC,MAAA,eAAA0E,GAAAxE,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAED,SAAAuE,EAAsC/H,GAAe,IAAAgI,EAAA,YAAAzE,EAAAA,EAAAA,KAAAY,MAAA,SAAA8D,GAAA,cAAAA,EAAA5D,KAAA4D,EAAA3D,MAAA,OAQlD,OAPIC,KAAKtB,cAAcjD,KACtBuE,KAAKtB,cAAcjD,GAAWuE,KAAK2D,8BACjClI,GACAiG,OAAM,SAAAC,GAEN,MADA8B,EAAK/E,cAAcjD,QAAWJ,EACxBsG,CACR,KACD+B,EAAA3C,OAAA,SACMf,KAAKtB,cAAcjD,IAAQ,wBAAAiI,EAAAvC,OAAA,GAAAqC,EAAA,UACnC,gBAAAI,GAAA,OAAAL,EAAAhF,MAAA,KAAAJ,UAAA,EAZA,IAYA,CAAAS,IAAA,cAAAC,MAED,SAAmBgF,GAAkD,IAADC,EAAA,KAAxB3E,EAAiBhB,UAAAhC,OAAA,QAAAd,IAAA8C,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC/D,OAAO4F,EAAAA,EAAAA,kBAAgB,eAAAC,GAAAjF,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAU,SAAAgF,EAAMC,GAAQ,IAAA/I,EAAAgJ,EAAA1I,EAAA4G,EAAA,OAAArD,EAAAA,EAAAA,KAAAY,MAAA,SAAAwE,GAAA,cAAAA,EAAAtE,KAAAsE,EAAArE,MAAA,OAEhB,OAFgBqE,EAAAtE,KAAA,EAEnC3E,EAAwB0I,EAAxB1I,MAAOgJ,EAAiBN,EAAjBM,IAAK1I,EAAYoI,EAAZpI,QAAO2I,EAAArE,KAAA,EACA+D,EAAKO,wBAAwB5I,GAAQ,OACpD,QADN4G,EAAY+B,EAAA/D,YACN,IAAZgC,GAAAA,EAAciC,OAAO,CAACnJ,EAAOgJ,IAAMI,SAAQ,SAAAtJ,GAAC,OAAIiJ,EAASnE,KAAK9E,EAAE,IAChEiJ,EAASM,WAAUJ,EAAArE,KAAA,gBAAAqE,EAAAtE,KAAA,EAAAsE,EAAA7D,GAAA6D,EAAA,SAEnBF,EAASO,MAAKL,EAAA7D,IAAG,yBAAA6D,EAAAjD,OAAA,GAAA8C,EAAA,kBAEpB,gBAAAS,GAAA,OAAAV,EAAAzF,MAAA,KAAAJ,UAAA,EATsB,GASpBgB,EAAKwF,OACV,GAAC,CAAA/F,IAAA,gBAAAC,MACD,WAAwC,KAAClB,CAAA,CA/G1C,CAE4BiH,EAAAA,uB,oDCjB7B,SAASC,EAAQtC,GAAmV,OAAtOsC,EAArD,oBAAXC,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBxC,GAAO,cAAcA,CAAK,EAAsB,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXuC,QAAyBvC,EAAIyC,cAAgBF,QAAUvC,IAAQuC,OAAOG,UAAY,gBAAkB1C,CAAK,EAAYsC,EAAQtC,EAAM,CAEzXvG,OAAOkJ,eAAeC,EAAS,aAAc,CAC3CtG,OAAO,IAETsG,EAAQC,WA+WR,SAAoBC,EAAQC,GAC1B,IAAIC,EAAUpH,UAAUhC,OAAS,QAAsBd,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC/EqH,EAAaxJ,OAAOyJ,OAAO,CAC7BC,wBAAwB,GACvBH,GACH,OAAO,IAAII,SAAQ,SAAUC,EAASC,GACpCR,EAAOS,KAAK,IAAIC,EAAoBP,IAAaQ,GAAG,OAAO,WACzD,OAAOJ,EAAQN,EACjB,IAAGU,GAAG,QAASH,GAAQC,KAAKG,EAAGC,kBAAkBZ,EAAU,CACzDa,SAAUX,EAAWW,UAAY,SAErC,GACF,EA1XAhB,EAAQiB,aAuVR,SAAsBb,GACpB,OAAO,IAAIQ,EAAoBR,EACjC,EAxVAJ,EAAQkB,WA4OR,SAAoBC,GAElB,IAAIC,EAAQ,GACRC,EAAY,GAChBF,EAAM/B,SAAQ,SAAU/E,GAClBA,EAAEiH,SACJD,EAAUtF,KAAK1B,GAEf+G,EAAMrF,KAAK1B,EAEf,IACA,IAAIkH,EAAMH,EAAMpJ,IAAIwJ,EAAMC,YAAYjE,KAAK,IAEvC6D,EAAUrK,SACZuK,GAAO,YACPA,GAAOF,EAAUrJ,IAAIwJ,EAAME,gBAAgBlE,KAAK,KAGlD,OAAO+D,CACT,EA9PAvB,EAAQ2B,UAyLR,SAAmBxB,EAAUC,GAC3B,OAAOU,EAAGc,iBAAiBzB,GAAUQ,KAAKkB,EAAYzB,GACxD,EA1LAJ,EAAQ6B,YAAcA,EACtB7B,EAAQ8B,gBAyMR,SAAyBP,GACvB,IAAIQ,EAAe/I,UAAUhC,OAAS,QAAsBd,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,CAAC,EACxF,IAAKuI,EAAK,MAAO,GAEjB,IAAInB,EAAU4B,EAAqBD,GAE/BZ,EAAQ,GACRpF,EAAOoF,EAAMpF,KAAKkG,KAAKd,GACvBe,EAAS,IAAIC,EAAOC,QAAQ,CAC9BC,gBAAiBjC,EAAQ3C,cAAgB1B,EAAO,KAChDuG,kBAAmBlC,EAAQzC,gBAAkB5B,EAAO,KACpDwG,gBAAiBnC,EAAQ1C,cAAgB3B,EAAO,KAChDyG,iBAAkBpC,EAAQxC,eAAiB7B,EAAO,KAClD0G,WAAYC,IACZC,cAAe,SAAuBC,GACpC,MAAMA,CACR,IAIF,OAFArB,EAAI9F,MAAM,SAAS2D,QAAQ8C,EAAOW,QAAQZ,KAAKC,IAC/CA,EAAOY,SACA3B,CACT,EA5NA,IAIgC/D,EAJ5B+E,GAI4B/E,EAJI2F,EAAQ,SAIS3F,EAAI4F,WAAa5F,EAAM,CAAEgF,QAAShF,GAFnFoE,EAAQuB,EAAQ,OAIpB,SAASjK,EAAgBmK,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,oCAAwC,CAExJ,SAASC,EAAkBC,EAAQC,GAAS,IAAK,IAAIjJ,EAAI,EAAGA,EAAIiJ,EAAMtM,OAAQqD,IAAK,CAAE,IAAIkJ,EAAaD,EAAMjJ,GAAIkJ,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAM7M,OAAOkJ,eAAesD,EAAQE,EAAW9J,IAAK8J,EAAa,CAAE,CAE5T,SAAS/J,EAAa0J,EAAaS,EAAYC,GAAmJ,OAAhID,GAAYP,EAAkBF,EAAYpD,UAAW6D,GAAiBC,GAAaR,EAAkBF,EAAaU,GAAqBV,CAAa,CAEtN,SAASxK,EAAUmL,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIX,UAAU,sDAAyDU,EAAS/D,UAAYjJ,OAAOkN,OAAOD,GAAcA,EAAWhE,UAAW,CAAED,YAAa,CAAEnG,MAAOmK,EAAUH,UAAU,EAAMD,cAAc,KAAeK,GAAYE,EAAgBH,EAAUC,EAAa,CAEhY,SAASE,EAAgBC,EAAGC,GAA+G,OAA1GF,EAAkBnN,OAAOsN,gBAAkB,SAAyBF,EAAGC,GAAsB,OAAjBD,EAAEG,UAAYF,EAAUD,CAAG,EAAUD,EAAgBC,EAAGC,EAAI,CAEzK,SAAStL,EAAayL,GAAW,IAAIC,EAMrC,WAAuC,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,oBAAVC,MAAsB,OAAO,EAAM,IAAsF,OAAhFC,QAAQ7E,UAAU8E,QAAQzL,KAAKoL,QAAQC,UAAUG,QAAS,IAAI,WAAa,MAAY,CAAM,CAAE,MAAOnI,GAAK,OAAO,CAAO,CAAE,CANvQqI,GAA6B,OAAO,WAAkC,IAAsCC,EAAlCC,EAAQC,EAAgBX,GAAkB,GAAIC,EAA2B,CAAE,IAAIW,EAAYD,EAAgBnK,MAAMgF,YAAaiF,EAASP,QAAQC,UAAUO,EAAO/L,UAAWiM,EAAY,MAASH,EAASC,EAAM3L,MAAMyB,KAAM7B,WAAc,OAEpX,SAAoCkM,EAAM/L,GAAQ,GAAIA,IAA2B,WAAlBuG,EAAQvG,IAAsC,oBAATA,GAAwB,OAAOA,EAAa,QAAa,IAATA,EAAmB,MAAM,IAAIgK,UAAU,4DAA+D,OAAOgC,EAAuBD,EAAO,CAF4FE,CAA2BvK,KAAMiK,EAAS,CAAG,CAIxa,SAASK,EAAuBD,GAAQ,QAAa,IAATA,EAAmB,MAAM,IAAIG,eAAe,6DAAgE,OAAOH,CAAM,CAIrK,SAASF,EAAgBf,GAAwJ,OAAnJe,EAAkBnO,OAAOsN,eAAiBtN,OAAOyO,eAAiB,SAAyBrB,GAAK,OAAOA,EAAEG,WAAavN,OAAOyO,eAAerB,EAAI,EAAUe,EAAgBf,EAAI,CAE5M,IACIsB,EADWxC,EAAQ,OACEwC,UAErBC,EAAUzC,EAAAA,OAAAA,EAIVjC,EAAiE,KAGrE,SAAS2E,EAAUC,GACbC,GAAWA,EAAQC,SAAUD,EAAQC,SAASF,GAAeA,GACnE,CAGA,SAAS1D,EAAqB5B,GAC5B,IAAIyF,EAAqB7M,UAAUhC,OAAS,QAAsBd,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC1F8M,EAAMjP,OAAOyJ,OAAO,CACtB7C,eAAe,EACfE,iBAAiB,EACjBC,gBAAgB,EAChBF,eAAe,GACdmI,EAAoBzF,GASvB,OAPIA,EAAQ2F,WACVD,EAAIrI,eAAgB,EACpBqI,EAAInI,iBAAkB,EACtBmI,EAAIpI,eAAgB,EACpBoI,EAAIlI,gBAAiB,GAGhBkI,CACT,CAEA,IAAIE,EAA4B,SAAUC,GACxCvN,EAAUsN,EAAcC,GAExB,IAAItN,EAASC,EAAaoN,GAE1B,SAASA,IACP,IAAInN,EAEAkJ,EAAe/I,UAAUhC,OAAS,QAAsBd,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAExFF,EAAgB+B,KAAMmL,GAEtB,IAAI5F,EAAU4B,EAAqBD,IAEnClJ,EAAQF,EAAOQ,KAAK0B,KAAM,CACxBqL,YAAY,KAERlF,SAAWe,EAAaf,UAAY,OAC1CnI,EAAMsN,QAAU,IAAIX,EACpB3M,EAAMuN,WAAa,GAEnB,IAAIrK,EAAOlD,EAAMkD,KAAKkG,KAAKkD,EAAuBtM,IAYlD,OAVAA,EAAMqJ,OAAS,IAAIC,EAAOC,QAAQ,CAChCC,gBAAiBjC,EAAQ3C,cAAgB1B,EAAO,KAChDuG,kBAAmBlC,EAAQzC,gBAAkB5B,EAAO,KACpDwG,gBAAiBnC,EAAQ1C,cAAgB3B,EAAO,KAChDyG,iBAAkBpC,EAAQxC,eAAiB7B,EAAO,KAClD4G,cAAe,SAAuBC,GACpC,OAAO/J,EAAMwN,KAAK,QAASzD,EAC7B,EACAH,WAAYrC,EAAQqC,aAEf5J,CACT,CA8CA,OA5CAW,EAAawM,EAAc,CAAC,CAC1BvM,IAAK,WACLC,MAAO,SAAkB7D,GACvB,IAAIyE,EAAOzE,EAAKyQ,SAAS,QAErBhM,GACFO,KAAKqH,OAAOW,QAAQvI,EAExB,GACC,CACDb,IAAK,YACLC,MAAO,SAAmBQ,GACxB,IAAIiC,EAAStB,KAET0L,GAAU1L,KAAKuL,WAAalM,GAAQuB,MAAM,SAC9CZ,KAAKuL,WAAaG,EAAOC,MAErB3L,KAAK4L,eAAiB5L,KAAKuL,WAAWpP,OAAS6D,KAAK4L,cACtD5L,KAAKwL,KAAK,QAAS,IAAIhL,MAAM,+BAI/BkL,EAAOnH,SAAQ,SAAUsH,GACvB,OAAOvK,EAAOwK,SAASD,EACzB,GACF,GACC,CACDjN,IAAK,aACLC,MAAO,SAAoBkN,EAAO5F,EAAU0E,GAC1C7K,KAAKgM,UAAUhM,KAAKsL,QAAQW,MAAMF,IAElCnB,EAAUC,EACZ,GACC,CACDjM,IAAK,SACLC,MAAO,SAAgBgM,GACjB7K,KAAKsL,QAAQnH,KAAKnE,KAAKgM,UAAUhM,KAAKsL,QAAQnH,OAC3B,MAAnBnE,KAAKuL,YAAoBvL,KAAK8L,SAAS9L,KAAKuL,YAChDvL,KAAKqH,OAAOY,SAEZ2C,EAAUC,EACZ,KAGKM,CACT,CAjFgC,CAiF9BT,GAiBF,SAAS1D,IACP,IAAIzB,EAAUpH,UAAUhC,OAAS,QAAsBd,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC/EqH,EAAaxJ,OAAOyJ,OAAO,CAC7BmC,WAAY,KACXrC,GACH,OAAO,IAAI4F,EAAa3F,EAC1B,CAwFA,IAAIO,EAAmC,SAAUmG,GAC/CrO,EAAUkI,EAAqBmG,GAE/B,IAAIC,EAAUpO,EAAagI,GAE3B,SAASA,IACP,IAAIvD,EAEA+C,EAAUpH,UAAUhC,OAAS,QAAsBd,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAYnF,OAVAF,EAAgB+B,KAAM+F,IAEtBvD,EAAS2J,EAAQ7N,KAAK0B,KAAMhE,OAAOyJ,OAAOF,EAAS,CACjD8F,YAAY,MAEPe,uBAAyB,EAChC5J,EAAO6J,yBAA2B9G,EAAQ+G,cAAgB,IAC1D9J,EAAOkD,uBAAyBH,EAAQG,yBAA0B,EAClElD,EAAO+J,mBAAoB,EAC3B/J,EAAOgK,WAAY,EACZhK,CACT,CAgDA,OA9CA7D,EAAaoH,EAAqB,CAAC,CACjCnH,IAAK,aACLC,MAAO,SAAoBkN,EAAO5F,EAAU0E,GAG1C,IAAInE,EAqBJ,IAnBK1G,KAAKuM,mBAAqBvM,KAAK0F,wBAA4D,SAAjCqG,EAAM,IAAMA,GAAOU,WAChFzM,KAAKkB,KAAK,WAKR6K,EAAMtF,WAAazG,KAAKwM,YAC1BxM,KAAKkB,KAAK,aACVlB,KAAKwM,WAAY,GAIjB9F,EADEjK,MAAMC,QAAQqP,GACVA,EAAM5O,IAAIwJ,EAAMC,YAAYjE,KAAK,KAEjC,EAAIgE,EAAMC,YAAYmF,GAG9B/L,KAAKkB,KAAKwF,GAEN1G,KAAKoM,wBAA0BpM,KAAKqM,yBACtCrM,KAAKkB,KAAK,SACVlB,KAAKoM,uBAAyB,MACzB,CAIL,IAFA,IAAIM,EAAQ,EAEHlN,EAAI,EAAGA,EAAIkH,EAAIvK,OAAQqD,GAAK,EACpB,OAAXkH,EAAIlH,KAAakN,GAAS,GAGhC1M,KAAKoM,wBAA0BM,CACjC,CAEA1M,KAAKuM,mBAAoB,EAEzB3B,EAAUC,EACZ,KAGK9E,CACT,CAtEuC,CAsErC2E,E,qCC9UF,SAAS7F,EAAQtC,GAAmV,OAAtOsC,EAArD,oBAAXC,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBxC,GAAO,cAAcA,CAAK,EAAsB,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXuC,QAAyBvC,EAAIyC,cAAgBF,QAAUvC,IAAQuC,OAAOG,UAAY,gBAAkB1C,CAAK,EAAYsC,EAAQtC,EAAM,CAKzX4C,EAAQ,OAAU,EAElB,IAAIwH,EAAOzE,EAAQ,OAEf0E,EAIJ,SAAiCrK,EAAKsK,GAAe,IAAKA,GAAetK,GAAOA,EAAI4F,WAAc,OAAO5F,EAAO,GAAY,OAARA,GAAiC,WAAjBsC,EAAQtC,IAAoC,oBAARA,EAAsB,MAAO,CAAEgF,QAAShF,GAAS,IAAIuK,EAAQC,EAAyBF,GAAc,GAAIC,GAASA,EAAMvQ,IAAIgG,GAAQ,OAAOuK,EAAMzJ,IAAId,GAAQ,IAAIyK,EAAS,CAAC,EAAOC,EAAwBjR,OAAOkJ,gBAAkBlJ,OAAOkR,yBAA0B,IAAK,IAAItO,KAAO2D,EAAO,GAAY,YAAR3D,GAAqB5C,OAAOiJ,UAAUkI,eAAe7O,KAAKiE,EAAK3D,GAAM,CAAE,IAAIwO,EAAOH,EAAwBjR,OAAOkR,yBAAyB3K,EAAK3D,GAAO,KAAUwO,IAASA,EAAK/J,KAAO+J,EAAKC,KAAQrR,OAAOkJ,eAAe8H,EAAQpO,EAAKwO,GAAgBJ,EAAOpO,GAAO2D,EAAI3D,EAAQ,CAAIoO,EAAOzF,QAAUhF,EAASuK,GAASA,EAAMO,IAAI9K,EAAKyK,GAAW,OAAOA,CAAQ,CAJ1xBM,CAAwBpF,EAAQ,QAE3C,SAAS6E,EAAyBF,GAAe,GAAuB,oBAAZU,QAAwB,OAAO,KAAM,IAAIC,EAAoB,IAAID,QAAeE,EAAmB,IAAIF,QAAW,OAAQR,EAA2B,SAAkCF,GAAe,OAAOA,EAAcY,EAAmBD,CAAmB,GAAGX,EAAc,CAI9U,IAAIlP,EAAW,CACbqJ,YAAa2F,EAAK3F,YAClBF,UAAW6F,EAAK7F,UAChBG,gBAAiB0F,EAAK1F,gBACtBZ,WAAYsG,EAAKtG,WACjBD,aAAcuG,EAAKvG,aACnBhB,WAAYuH,EAAKvH,WACjBwH,KAAMA,GAERzH,EAAQ,EAAUxH,C,qCCxBlB,SAASkH,EAAQtC,GAAmV,OAAtOsC,EAArD,oBAAXC,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBxC,GAAO,cAAcA,CAAK,EAAsB,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXuC,QAAyBvC,EAAIyC,cAAgBF,QAAUvC,IAAQuC,OAAOG,UAAY,gBAAkB1C,CAAK,EAAYsC,EAAQtC,EAAM,CAEzXvG,OAAOkJ,eAAeC,EAAS,aAAc,CAC3CtG,OAAO,IAETsG,EAAAA,aAAkB,EAElB,IAAIuI,EAIJ,SAAiCnL,EAAKsK,GAAe,IAAKA,GAAetK,GAAOA,EAAI4F,WAAc,OAAO5F,EAAO,GAAY,OAARA,GAAiC,WAAjBsC,EAAQtC,IAAoC,oBAARA,EAAsB,MAAO,CAAEgF,QAAShF,GAAS,IAAIuK,EAAQC,EAAyBF,GAAc,GAAIC,GAASA,EAAMvQ,IAAIgG,GAAQ,OAAOuK,EAAMzJ,IAAId,GAAQ,IAAIyK,EAAS,CAAC,EAAOC,EAAwBjR,OAAOkJ,gBAAkBlJ,OAAOkR,yBAA0B,IAAK,IAAItO,KAAO2D,EAAO,GAAY,YAAR3D,GAAqB5C,OAAOiJ,UAAUkI,eAAe7O,KAAKiE,EAAK3D,GAAM,CAAE,IAAIwO,EAAOH,EAAwBjR,OAAOkR,yBAAyB3K,EAAK3D,GAAO,KAAUwO,IAASA,EAAK/J,KAAO+J,EAAKC,KAAQrR,OAAOkJ,eAAe8H,EAAQpO,EAAKwO,GAAgBJ,EAAOpO,GAAO2D,EAAI3D,EAAQ,CAAIoO,EAAOzF,QAAUhF,EAASuK,GAASA,EAAMO,IAAI9K,EAAKyK,GAAW,OAAOA,CAAQ,CAJ3xBM,CAAwBpF,EAAQ,QAE1C,SAAS6E,EAAyBF,GAAe,GAAuB,oBAAZU,QAAwB,OAAO,KAAM,IAAIC,EAAoB,IAAID,QAAeE,EAAmB,IAAIF,QAAW,OAAQR,EAA2B,SAAkCF,GAAe,OAAOA,EAAcY,EAAmBD,CAAmB,GAAGX,EAAc,CAI9U,SAASc,EAAmBC,GAAO,OAMnC,SAA4BA,GAAO,GAAInR,MAAMC,QAAQkR,GAAM,OAAOC,EAAkBD,EAAM,CANhDE,CAAmBF,IAI7D,SAA0BG,GAAQ,GAAsB,qBAAXjJ,QAAmD,MAAzBiJ,EAAKjJ,OAAOC,WAA2C,MAAtBgJ,EAAK,cAAuB,OAAOtR,MAAMuR,KAAKD,EAAO,CAJxFE,CAAiBL,IAAQM,EAA4BN,IAE1H,WAAgC,MAAM,IAAItF,UAAU,uIAAyI,CAF3D6F,EAAsB,CAQxJ,SAASC,EAAeR,EAAKpO,GAAK,OAUlC,SAAyBoO,GAAO,GAAInR,MAAMC,QAAQkR,GAAM,OAAOA,CAAK,CAV3BS,CAAgBT,IAQzD,SAA+BA,EAAKpO,GAAK,IAAI1D,EAAY,MAAP8R,EAAc,KAAyB,qBAAX9I,QAA0B8I,EAAI9I,OAAOC,WAAa6I,EAAI,cAAe,GAAU,MAAN9R,EAAY,OAAQ,IAAkDwS,EAAIC,EAAlDC,EAAO,GAAQC,GAAK,EAAUC,GAAK,EAAmB,IAAM,IAAK5S,EAAKA,EAAGwC,KAAKsP,KAAQa,GAAMH,EAAKxS,EAAGiE,QAAQ4O,QAAoBH,EAAKtN,KAAKoN,EAAGzP,QAAYW,GAAKgP,EAAKrS,SAAWqD,GAA3DiP,GAAK,GAAkE,CAAE,MAAO1G,GAAO2G,GAAK,EAAMH,EAAKxG,CAAK,CAAE,QAAU,IAAW0G,GAAsB,MAAhB3S,EAAW,QAAWA,EAAW,QAAK,CAAE,QAAU,GAAI4S,EAAI,MAAMH,CAAI,CAAE,CAAE,OAAOC,CAAM,CAR/bI,CAAsBhB,EAAKpO,IAAM0O,EAA4BN,EAAKpO,IAEnI,WAA8B,MAAM,IAAI8I,UAAU,4IAA8I,CAFvDuG,EAAoB,CAI7J,SAASX,EAA4B9E,EAAG0F,GAAU,GAAK1F,EAAL,CAAgB,GAAiB,kBAANA,EAAgB,OAAOyE,EAAkBzE,EAAG0F,GAAS,IAAIC,EAAI/S,OAAOiJ,UAAUwG,SAASnN,KAAK8K,GAAGnI,MAAM,GAAI,GAAiE,MAAnD,WAAN8N,GAAkB3F,EAAEpE,cAAa+J,EAAI3F,EAAEpE,YAAYxH,MAAgB,QAANuR,GAAqB,QAANA,EAAoBtS,MAAMuR,KAAK5E,GAAc,cAAN2F,GAAqB,2CAA2CC,KAAKD,GAAWlB,EAAkBzE,EAAG0F,QAAzG,CAA7O,CAA+V,CAE/Z,SAASjB,EAAkBD,EAAKqB,IAAkB,MAAPA,GAAeA,EAAMrB,EAAIzR,UAAQ8S,EAAMrB,EAAIzR,QAAQ,IAAK,IAAIqD,EAAI,EAAG0P,EAAO,IAAIzS,MAAMwS,GAAMzP,EAAIyP,EAAKzP,IAAO0P,EAAK1P,GAAKoO,EAAIpO,GAAM,OAAO0P,CAAM,CAMtL,SAASjR,EAAgBmK,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,oCAAwC,CAExJ,SAASC,EAAkBC,EAAQC,GAAS,IAAK,IAAIjJ,EAAI,EAAGA,EAAIiJ,EAAMtM,OAAQqD,IAAK,CAAE,IAAIkJ,EAAaD,EAAMjJ,GAAIkJ,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAM7M,OAAOkJ,eAAesD,EAAQE,EAAW9J,IAAK8J,EAAa,CAAE,CAE5T,SAAS/J,EAAa0J,EAAaS,EAAYC,GAAmJ,OAAhID,GAAYP,EAAkBF,EAAYpD,UAAW6D,GAAiBC,GAAaR,EAAkBF,EAAaU,GAAqBV,CAAa,CAEtN,IAAI8G,EAAsB,CACxBC,OAAQ,iBACRC,aAAc,oBAGZC,EAA2B,WAC7B,SAASA,EAAYC,GACnBtR,EAAgB+B,KAAMsP,GAEtBtP,KAAKuP,YAAcA,EACnBvP,KAAKwP,qBAAkBnU,CACzB,CA+BA,OA7BAsD,EAAa2Q,EAAa,CAAC,CACzB1Q,IAAK,UACLC,MAAO,SAAiBY,GACtB,IAAIgQ,EAAW,oBAAoBC,KAAKjQ,GAEpCgQ,GACFzP,KAAK2P,SAEL3P,KAAKwP,gBAAkB,CACrBrM,GAAIsM,EAAS,GACbhJ,SAAU,IAERgJ,EAAS,KAAIzP,KAAKwP,gBAAgBI,YAAcH,EAAS,GAAGI,SACvD7P,KAAKwP,iBAAmB,KAAKR,KAAKvP,KAC3CO,KAAKwP,gBAAgB/I,UAAYhH,EAAK7C,QAAQ,MAAO,IAEzD,GACC,CACDgC,IAAK,SACLC,MAAO,WACDmB,KAAKwP,iBAAiBxP,KAAKuP,YAAYvP,KAAKwP,gBAClD,GACC,CACD5Q,IAAK,SACLC,MAAO,WACLmB,KAAK2P,QACP,KAGKL,CACT,CAtC+B,GAwC3BQ,EAAsB,WACxB,SAASA,EAAO1R,GACdH,EAAgB+B,KAAM8P,GAEtB,IAAIC,EAAW,WAAqB,EAEpC/T,OAAOyJ,OAAOzF,KAAM,CAClBwH,gBAAiBpJ,EAAKoJ,iBAAmBuI,EACzCC,YAAa5R,EAAK4R,aAAeD,EACjCrI,gBAAiBtJ,EAAKsJ,iBAAmBqI,EACzCjI,cAAe1J,EAAK0J,eAAiBiI,EACrCtI,kBAAmBrJ,EAAKqJ,mBAAqBsI,EAC7CpI,iBAAkBvJ,EAAKuJ,kBAAoBoI,EAE3CnI,gBAAgCvM,IAApB+C,EAAKwJ,WAA2B,IAAOxJ,EAAKwJ,WAGxDqI,2BAA4B,GAE5BC,uBAAwB,CAAC,EACzBC,qBAAsB,CAAC,EAQvBC,0BAA2B,CAAC,EAI5BC,KAAK,EACLC,WAAY,GAEhB,CA8SA,OA5SA3R,EAAamR,EAAQ,CAAC,CACpBlR,IAAK,UACLC,MAAO,SAAiBY,GAEtB,GAAIO,KAAKuQ,YACPvQ,KAAKuQ,YAAYvI,QAAQvI,QAI3B,IAAIO,KAAKqQ,IAOT,GAFArQ,KAAKsQ,YAAc,EAEf,cAActB,KAAKvP,GAErBO,KAAKwQ,YAAY/Q,OAFnB,CAOA,IAAIgR,EAAQ,eAAef,KAAKjQ,GAEhC,GAAIgR,EAAO,CAGT,IAAIC,EAAStC,EAAeqC,EAAO,GAC/BE,EAAYD,EAAO,GACnBE,EAAWF,EAAO,GAEtB,GAAyB,IAArBC,EAAUxU,OAEZ6D,KAAK6Q,yCACA,GAAyB,IAArBF,EAAUxU,OAAc,CACjC,IAAIsQ,EAAYiB,EAAIoD,eAAerR,GAEP,UAAxBgN,EAAUA,WACZzM,KAAK6Q,oCAEL7Q,KAAKqQ,KAAM,EACXrQ,KAAKuQ,YAAc,IAAIjB,EAAYtP,KAAK2H,mBAExC3H,KAAK+Q,UAAUtE,EAEnB,MACEmE,EAAWA,EAAShU,QAAQ,MAAO,IAEnCoD,KAAK+Q,UAAU,CACbC,QAASJ,GAGf,MAAO,GAAI,QAAQ5B,KAAKvP,QACjB,KAAI,QAAQuP,KAAKvP,GAOjB,CAEL,IAAIwR,EAAUxR,EAAK7C,QAAQ,WAAY,IACvC,MAAM,IAAI4D,MAAM,mCAAmChC,OAAOyS,EAAS,MACrE,CATEjR,KAAK6Q,oCAEL7Q,KAAKqQ,KAAM,EACXrQ,KAAKuQ,YAAc,IAAIjB,EAAYtP,KAAK2H,kBACxC3H,KAAKuQ,YAAYvI,QAAQvI,EAK3B,CA5CA,CA6CF,GACC,CACDb,IAAK,YACLC,MAAO,SAAmBW,GACpBA,EAAE,GACJQ,KAAKwH,gBAAgBhI,GACZA,EAAEiN,UACXzM,KAAKyH,kBAAkBjI,GACdA,EAAEwR,SACXhR,KAAK0H,gBAAgBlI,EAEzB,GACC,CACDZ,IAAK,SACLC,MAAO,WACLmB,KAAK6Q,oCAED7Q,KAAKuQ,aACPvQ,KAAKuQ,YAAYtI,SAGnBjI,KAAKgQ,aACP,GACC,CACDpR,IAAK,0BACLC,MAAO,WAuBL,IAtBA,IAAIb,EAAQgC,KAERkR,EAAsB/S,UAAUhC,OAAS,QAAsBd,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,EAE1FgT,EAAgB,SAASA,EAAcC,GACrCA,GAAQA,EAAK,IAAMA,EAAK,GAAGlV,YAAckV,EAAK,GAAGlV,WAAWmV,IAAMD,EAAK,GAAGlV,WAAWmV,GAAG,KAChFD,EAAK,GAAGlV,WAAWmV,GACzB9M,SAAQ,SAAUpB,UACbnF,EAAMkS,uBAAuB/M,UAC7BnF,EAAMmS,qBAAqBhN,EACpC,IACAiO,EAAK7M,SAAQ,SAAU/E,GACjBA,EAAEzC,gBAAgByC,EAAEzC,eAAewH,SAAQ,SAAU+M,GACvD,OAAOH,EAAcG,EACvB,IACI9R,EAAEnC,kBAAkBmC,EAAEnC,iBAAiBkH,SAAQ,SAAUgN,GAC3D,OAAOJ,EAAcI,EACvB,GACF,IAEJ,EAEOvR,KAAKiQ,2BAA2B9T,OAAS+U,EAAsBlR,KAAK4H,YAAY,CACrF,IAAIwJ,EAAOpR,KAAKiQ,2BAA2BuB,QAE3CxR,KAAK+Q,UAAUK,GAEfD,EAAcC,EAChB,CACF,GAOC,CACDxS,IAAK,oCACLC,MAAO,WAQL,GAPAmB,KAAKiQ,2BAA2B1L,QAAQvE,KAAK+Q,UAAU3J,KAAKpH,OAE5DA,KAAKiQ,2BAA6B,GAClCjQ,KAAKkQ,uBAAyB,CAAC,EAC/BlQ,KAAKmQ,qBAAuB,CAAC,EAGzBnU,OAAOyV,OAAOzR,KAAKoQ,2BAA2BvP,QAAO,SAAU6Q,GACjE,OAAO1V,OAAOC,KAAKyV,GAAOvV,MAC5B,IAAGA,OACD,MAAM,IAAIqE,MAAM,sGAAsGhC,OAAOmT,KAAKC,UAAU5R,KAAKoQ,4BAErJ,GAEC,CACDxR,IAAK,cACLC,MAAO,SAAqBY,GAC1B,IAAI6B,EAAStB,KAET6R,EAAcnE,EAAIoE,aAAarS,GACnCoS,EAAY9U,eAAiB,GAC7B8U,EAAYxU,iBAAmB,GAE/B,IAgCI0U,EAhCAC,EAAgBhS,KAAKsQ,WAErB2B,EAA2C,eAA5BJ,EAAY/U,YAG3BoV,EAAMD,EAAeJ,EAAY3V,WAAWqB,eAAiB,GAAK,CAACyU,GACnEG,EAAUF,EAAe,GAAKJ,EAAY3V,WAAWqB,eAAiB,GACtE6U,EAAUP,EAAY3V,WAAWmT,cAAgB,GAEhD6C,EAAI/V,QAAWgW,EAAQhW,QAAWiW,EAAQjW,QAgB/CgW,EAAQ5N,SAAQ,SAAU8N,GACP/Q,EAAO4O,uBAAuBmC,IAG7C/Q,EAAOkP,YAZX,SAA0BuB,GACxB,IAAI9H,EAAS0H,KAAKW,MAAMX,KAAKC,UAAUG,IAGvC,OAFA9H,EAAOnN,YAAc,aAEd4Q,EAAI6E,cAActI,EAC3B,CAOuBuI,CAAiBX,GAExC,IAEAK,EAAI3N,SAAQ,SAAUpB,GACpB,IAAIsP,EAAWnR,EAAO4O,uBAAuB/M,GAEzCsP,GACFA,EAASvR,KAAK2Q,GACdE,EAAUU,IAIVV,EAAU,CAACF,GAEXvQ,EAAOoR,wBAAwB,GAE1BP,EAAQhW,QAAWiW,EAAQjW,QAC9BmF,EAAO2O,2BAA2B/O,KAAK6Q,GAGzCzQ,EAAO4O,uBAAuB/M,GAAM4O,EAEpCzQ,EAAOqR,qBAAqBZ,EAAS5O,GAEzC,IAEAnD,KAAK4S,uBAAuBb,GAAW,CAACF,GAAc,CACpDzC,OAAQ+C,EACR9C,aAAc+C,GACbF,IA/CDlS,KAAK+Q,UAAU,CAACc,GAgDpB,GACC,CACDjT,IAAK,uBACLC,MAAO,SAA8BkT,EAAS5O,GAC5C,IAAI0P,EAAa7S,KAAKoQ,0BAA0BjN,GAM3C0P,GACL7W,OAAOC,KAAK4W,GAAYtO,SAAQ,SAAUuO,GACxC,IAAIC,EAAQ5D,EAAoB2D,IAAaA,EAASxW,cACtDyV,EAAQxN,SAAQ,SAAUyO,GACxB,IAAIC,GAEHA,EAAaD,EAAID,IAAQ7R,KAAK3C,MAAM0U,EAAYtF,EAAmBkF,EAAWC,YAExED,EAAWC,EACpB,GACF,GACF,GACC,CACDlU,IAAK,cACLC,MAAO,SAAqBqU,GAC1BlT,KAAKqQ,KAAM,EACXrQ,KAAK8H,cAAc,GAAGtJ,OAAOwB,KAAKsQ,WAAY,MAAM9R,OAAO0U,GAC7D,GACC,CACDtU,IAAK,yBACLC,MAAO,SAAgCkT,EAASc,EAAYX,GAC1D,IAAI1P,EAASxC,KAwBbhE,OAAOmX,QAAQN,GAAYtO,SAAQ,SAAUP,GAC3C,IAII+O,EAJAK,EAAQhF,EAAepK,EAAM,GAC7B8O,EAAWM,EAAM,GACTA,EAAM,GAGZ7O,SAAQ,SAAU8O,GACtB,IAdmBC,EAAeC,EAc9BC,EAAehR,EAAO0N,uBAAuBmD,GAE7CG,GAhB8BD,EAiBJxB,GAjBXuB,EAiBHE,GAfJ,GAAGrY,MAAQsY,KAAKC,IAAIJ,EAAc,GAAGnY,MAAOoY,EAAa,GAAGpY,OAE1EmY,EAAc,GAAGnP,IAAMsP,KAAKE,IAAIL,EAAc,GAAGnP,IAAKoP,EAAa,GAAGpP,KAc7D4O,IAAOA,EAAQ5D,EAAoB2D,IAAaA,EAASxW,eAEzD4V,EAAIrR,QAAO,SAAUsC,GACxB,OAnCR,SAAiBZ,EAAKqR,EAAOC,GAC3B,IAAIC,EAASvR,EAAIqR,GAEZE,IACHA,EAAS,CAAC,EAEVvR,EAAIqR,GAASE,GAGf,IAAIC,EAAYD,EAAOD,KAAU,EAEjC,OADAC,EAAOD,IAAS,EACTE,CACT,CAuBeC,CAAQxR,EAAO2N,qBAAsBhN,EAAI,GAAG3E,OAAOsU,EAAU,KAAKtU,OAAO6U,GAClF,IAAGlX,QACDqX,EAAajP,SAAQ,SAAU0P,GAC7BA,EAASlB,GAAO7R,KAAK6Q,EACvB,MAGGvP,EAAO4N,0BAA0BiD,KAAO7Q,EAAO4N,0BAA0BiD,GAAQ,CAAC,GAClF7Q,EAAO4N,0BAA0BiD,GAAMP,KAAWtQ,EAAO4N,0BAA0BiD,GAAMP,GAAY,IAE1GtQ,EAAO4N,0BAA0BiD,GAAMP,GAAU5R,KAAK6Q,GAE1D,GACF,GACF,KAGKjC,CACT,CAlV0B,GAoV1B3K,EAAAA,QAAkB2K,C,mCCxZlB,SAAS1B,EAAeR,EAAKpO,GAAK,OAMlC,SAAyBoO,GAAO,GAAInR,MAAMC,QAAQkR,GAAM,OAAOA,CAAK,CAN3BS,CAAgBT,IAIzD,SAA+BA,EAAKpO,GAAK,IAAI1D,EAAY,MAAP8R,EAAc,KAAyB,qBAAX9I,QAA0B8I,EAAI9I,OAAOC,WAAa6I,EAAI,cAAe,GAAU,MAAN9R,EAAY,OAAQ,IAAkDwS,EAAIC,EAAlDC,EAAO,GAAQC,GAAK,EAAUC,GAAK,EAAmB,IAAM,IAAK5S,EAAKA,EAAGwC,KAAKsP,KAAQa,GAAMH,EAAKxS,EAAGiE,QAAQ4O,QAAoBH,EAAKtN,KAAKoN,EAAGzP,QAAYW,GAAKgP,EAAKrS,SAAWqD,GAA3DiP,GAAK,GAAkE,CAAE,MAAO1G,GAAO2G,GAAK,EAAMH,EAAKxG,CAAK,CAAE,QAAU,IAAW0G,GAAsB,MAAhB3S,EAAW,QAAWA,EAAW,QAAK,CAAE,QAAU,GAAI4S,EAAI,MAAMH,CAAI,CAAE,CAAE,OAAOC,CAAM,CAJ/bI,CAAsBhB,EAAKpO,IAAM0O,EAA4BN,EAAKpO,IAEnI,WAA8B,MAAM,IAAI8I,UAAU,4IAA8I,CAFvDuG,EAAoB,CAQ7J,SAASlB,EAAmBC,GAAO,OAQnC,SAA4BA,GAAO,GAAInR,MAAMC,QAAQkR,GAAM,OAAOC,EAAkBD,EAAM,CARhDE,CAAmBF,IAM7D,SAA0BG,GAAQ,GAAsB,qBAAXjJ,QAAmD,MAAzBiJ,EAAKjJ,OAAOC,WAA2C,MAAtBgJ,EAAK,cAAuB,OAAOtR,MAAMuR,KAAKD,EAAO,CANxFE,CAAiBL,IAAQM,EAA4BN,IAE1H,WAAgC,MAAM,IAAItF,UAAU,uIAAyI,CAF3D6F,EAAsB,CAIxJ,SAASD,EAA4B9E,EAAG0F,GAAU,GAAK1F,EAAL,CAAgB,GAAiB,kBAANA,EAAgB,OAAOyE,EAAkBzE,EAAG0F,GAAS,IAAIC,EAAI/S,OAAOiJ,UAAUwG,SAASnN,KAAK8K,GAAGnI,MAAM,GAAI,GAAiE,MAAnD,WAAN8N,GAAkB3F,EAAEpE,cAAa+J,EAAI3F,EAAEpE,YAAYxH,MAAgB,QAANuR,GAAqB,QAANA,EAAoBtS,MAAMuR,KAAK5E,GAAc,cAAN2F,GAAqB,2CAA2CC,KAAKD,GAAWlB,EAAkBzE,EAAG0F,QAAzG,CAA7O,CAA+V,CAM/Z,SAASjB,EAAkBD,EAAKqB,IAAkB,MAAPA,GAAeA,EAAMrB,EAAIzR,UAAQ8S,EAAMrB,EAAIzR,QAAQ,IAAK,IAAIqD,EAAI,EAAG0P,EAAO,IAAIzS,MAAMwS,GAAMzP,EAAIyP,EAAKzP,IAAO0P,EAAK1P,GAAKoO,EAAIpO,GAAM,OAAO0P,CAAM,CAlCtLlT,OAAOkJ,eAAeC,EAAS,aAAc,CAC3CtG,OAAO,IAETsG,EAAQ+O,OAASA,EACjB/O,EAAQgP,aAAeA,EACvBhP,EAAQiP,iBAAmBA,EAC3BjP,EAAQkP,cAAgBA,EACxBlP,EAAQmP,gBAAkBA,EAC1BnP,EAAQoN,cAAgBA,EACxBpN,EAAQyB,WAqUR,SAAoB2N,GAClB,SAASC,EAAiBpD,GACxB,OAAIA,EAAK,IAAMA,EAAKlV,WACXqW,EAAcnB,GAGnBA,EAAK3E,UACA6H,EAAgBlD,GAGrBA,EAAK3K,SACAI,EAAeuK,GAGpBA,EAAKJ,QACAqD,EAAcjD,GAGhB,wCACT,CAEA,GAAI3U,MAAMC,QAAQ6X,GAChB,OAAOA,EAAYpX,KAAI,SAAUiU,GAC/B,OAAOoD,EAAiBpD,EAC1B,IAGF,OAAOoD,EAAiBD,EAC1B,EAhWApP,EAAQ0B,eAAiBA,EACzB1B,EAAQsP,gBAAkBA,EAC1BtP,EAAQ2L,eAyJR,SAAwBrR,GACtB,IAAIgR,EAAQ,wBAAwBf,KAAKjQ,GAEzC,IAAKgR,EAAO,OAAO,KAEnB,IAAIjT,EAAOiT,EAAM,GACbG,EAAWH,EAAM,GACjBiE,EAAS,CACXjI,UAAWjP,GAGToT,EAASzU,SACXyU,EAAWA,EAAShU,QAAQ,SAAU,IACtC8X,EAAO7V,MAAQ+R,GAIjB,GAAa,oBAATpT,EAA4B,CAC9B,IACImX,EAAmBvG,EADDwC,EAAShQ,MAAM,MAAO,GACW,GACnDgU,EAAQD,EAAiB,GACzBE,EAAeF,EAAiB,GAChCG,EAAaH,EAAiB,GAElCD,EAAOK,OAASH,EAChBF,EAAOvZ,MAAQ0Z,GAAgBA,EAAajY,QAAQ,MAAO,IAC3D8X,EAAOvQ,IAAM2Q,GAAcA,EAAWlY,QAAQ,MAAO,GACvD,MAAO,GAAa,iBAATY,EAAyB,CAClC,IACIwX,EAAmB5G,EADAwC,EAAShQ,MAAM,MAAO,GACW,GACpDqU,EAASD,EAAiB,GAC1BE,EAAYF,EAAiB,GAEjCN,EAAOO,OAASA,EAChBP,EAAOQ,UAAYA,CACrB,CAEA,OAAOR,CACT,EA9LAvP,EAAQ2M,aAyHR,SAAsBrS,GAGpB,IAAIxE,EAAIwE,EAAKmB,MAAM,MAAMzD,KAAI,SAAUf,GACrC,MAAa,MAANA,EAAY,KAAOA,CAC5B,IAEAnB,EAAE,GAAKka,EAASla,EAAE,IAClBA,EAAE,GAAKka,EAASla,EAAE,IAClBA,EAAE,GAAKka,EAASla,EAAE,IAClBA,EAAE,GAAKwZ,EAAgBxZ,EAAE,IAGzB,IAFA,IAAIyZ,EAAS,CAAC,EAELlV,EAAI,EAAGA,EAAI4V,EAAWjZ,OAAQqD,GAAK,EAC1CkV,EAAOU,EAAW5V,IAAe,MAATvE,EAAEuE,GAAa,KAAOvE,EAAEuE,GAG7B,OAAjBkV,EAAOvZ,QAAgBuZ,EAAOvZ,MAAQka,SAASX,EAAOvZ,MAAO,KAC9C,OAAfuZ,EAAOvQ,MAAcuQ,EAAOvQ,IAAMkR,SAASX,EAAOvQ,IAAK,KACtC,OAAjBuQ,EAAO/Y,QAAgB+Y,EAAO/Y,MAAQ2Z,WAAWZ,EAAO/Y,MAAO,KAC9C,MAAjB+Y,EAAOtZ,SAAgBsZ,EAAOtZ,OAASsZ,EAAOtZ,QAClD,OAAOsZ,CACT,EA9IAvP,EAAQgQ,SAAWA,EAwBnB,IAAIC,EAAa,CAAC,WAAY,SAAU,cAAe,QAAS,MAAO,QAAS,SAAU,QAAS,cAanG,SAASD,EAASI,GAChB,OAAU,OAANA,EACK,KAGFC,OAAOD,GAAG3Y,QAAQ,sBAAsB,SAAU6Y,EAAGC,GAC1D,OAAOF,OAAOG,aAAaN,SAASK,EAAK,IAC3C,GACF,CASA,SAASE,EAAQC,EAAON,GACtB,OAAOC,OAAOD,GAAG3Y,QAAQiZ,GAAO,SAAUC,GACxC,IAAIC,EAAMD,EAAGE,WAAW,GAAGvK,SAAS,IAAIwK,cAGxC,OADIF,EAAI5Z,OAAS,IAAG4Z,EAAM,IAAIvX,OAAOuX,IAC9B,IAAIvX,OAAOuX,EACpB,GACF,CAEA,SAAS7B,EAAOqB,GAEd,OAAOK,EAAQ,mCAAoCL,EACrD,CASA,SAASpB,EAAaoB,GAEpB,OAAOK,EAAQ,+BAAgCL,EACjD,CASA,SAASd,EAAgByB,GACvB,IAAMA,IAAcA,EAAW/Z,QAA0B,MAAf+Z,EAAoB,MAAO,CAAC,EACtE,IAAIC,EAAQ,CAAC,EAqBb,OApBAD,EAAWtZ,QAAQ,SAAU,IAAIqE,MAAM,GAAI,GAC1CL,MAAM,KAAK2D,SAAQ,SAAU6R,GAC5B,IAAIC,EAEJ,GAAKD,EAAL,CACA,IAAI5Z,EAAO4Z,EAAUvG,OAAOjP,MAAM,KAClC,GAAMpE,EAAK,IAAMA,EAAK,GAAGL,OAAzB,CACAK,EAAK,GAAKA,EAAK,GAAGqT,OAClB,IAAIyG,EAAOH,EAAM3Z,EAAK,GAAGqT,QAEpByG,IACHA,EAAO,GACPH,EAAM3Z,EAAK,IAAM8Z,IAIlBD,EAAQC,GAAMpV,KAAK3C,MAAM8X,EAAO1I,EAAmBnR,EAAK,GAAGoE,MAAM,KAAKzD,KAAI,SAAUoY,GACnF,OAAOA,EAAE1F,MACX,IAAG1S,IAAIgY,IAZiC,CAFlB,CAexB,IACOgB,CACT,CAsFA,SAAS/B,EAAiB+B,GACxB,IAAII,EAAY,GAiBhB,OAhBAva,OAAOC,KAAKka,GAAO5R,SAAQ,SAAUiS,GACnC,IACIC,EADAC,EAAMP,EAAMK,GAIdC,EADEC,EAAIvJ,eAAe,YACT+G,EAAOwC,EAAIjL,YACdhP,MAAMC,QAAQga,EAAIjF,QACfiF,EAAIjF,OAAOtU,IAAI+W,GAAQvR,KAAK,KAC/BlG,MAAMC,QAAQga,GACXA,EAAIvZ,IAAI+W,GAAQvR,KAAK,KAErBuR,EAAOwC,GAGrBH,EAAUrV,KAAK,GAAG1C,OAAO0V,EAAOsC,GAAM,KAAKhY,OAAOiY,GACpD,IACOF,EAAUpa,OAASoa,EAAU5T,KAAK,MAAMnE,OAAO,KAAO,GAC/D,CAEA,IAAImY,EAAkB,CAAC,IAAK,IAAK,KAEjC,SAASC,EAAqB3b,EAAG4b,GAI/B,IAHA,IAAIX,EAA8B,OAAjBjb,EAAEiB,iBAAwCb,IAAjBJ,EAAEiB,WAA2B,IAAMkY,EAAiBnZ,EAAEiB,YAC5F4a,EAAS,GAEJtX,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAAG,CAC7B,IAAIkX,EAAMzb,EAAEma,EAAW5V,IAGrBsX,EAAOtX,GADC,IAANA,EACkB,OAARkX,QAAwBrb,IAARqb,EAAoB,IAAMC,EAAgBD,EAAM,IAAMA,EAE9D,OAARA,QAAwBrb,IAARqb,EAAoB,IAAMvC,EAAaqB,OAAOkB,GAE9E,CAEAI,EAAO,GAAKZ,EACZ,IAAIa,EAAkB,GAAGvY,OAAOsY,EAAOnU,KAAK,MAAO,MAEnD,OAAIkU,EAAYE,GACP,IAITF,EAAYE,IAAmB,EACxBA,EACT,CAEA,SAASC,EAAejF,EAAS8E,GAC/B,GAAIpa,MAAMC,QAAQqV,GAChB,OAAOA,EAAQ5U,KAAI,SAAUlC,GAC3B,OAAO+b,EAAe/b,EAAG4b,EAC3B,IAAGlU,KAAK,IAGV,IAAIsU,EAAU,CAACL,EAAqB7E,EAAS8E,IAQ7C,MAPA,CAAC,iBAAkB,oBAAoBtS,SAAQ,SAAU2S,GACnDnF,EAAQmF,IACVD,EAAQ/V,KAAK3C,MAAM0Y,EAAStJ,EAAmBoE,EAAQmF,GAAW/Z,KAAI,SAAUlC,GAC9E,OAAO+b,EAAe/b,EAAG4b,EAC3B,KAEJ,IACOI,EAAQtU,KAAK,GACtB,CASA,SAAS4P,EAAc4E,GAErB,OAAOH,EAAeG,EADX,CAAC,EAEd,CASA,SAAS7C,EAAgB7H,GACvB,IAAI/F,EAAM,KAAKlI,OAAOiO,EAAUA,WAGhC,OAFIA,EAAU5N,QAAO6H,GAAO,IAAIlI,OAAOiO,EAAU5N,QACjD6H,GAAO,IAET,CAUA,SAAS2N,EAAcrD,GACrB,MAAO,KAAKxS,OAAOwS,EAAQA,QAAS,KACtC,CASA,SAASnK,EAAe6O,GACtB,MAAO,IAAIlX,OAAOkX,EAAIvS,IAAI3E,OAAOkX,EAAI9F,YAAc,IAAIpR,OAAOkX,EAAI9F,aAAe,GAAI,MAAMpR,OAAOkX,EAAIjP,SAAU,KAClH,C","sources":["../../../plugins/gtf/src/util.ts","../../../plugins/gtf/src/GtfAdapter/GtfAdapter.ts","../../../node_modules/@gmod/gtf/dist/api.js","../../../node_modules/@gmod/gtf/dist/index.js","../../../node_modules/@gmod/gtf/dist/parse.js","../../../node_modules/@gmod/gtf/dist/util.js"],"sourcesContent":["export type Strand = '+' | '-' | '.' | '?'\nexport interface FeatureLoc {\n  [key: string]: unknown\n  start: number\n  end: number\n  strand: Strand\n  seq_name: string\n  child_features: FeatureLoc[][]\n  data: unknown\n  derived_features: unknown\n  attributes: { [key: string]: unknown[] }\n}\n\nexport function featureData(data: FeatureLoc) {\n  const f: Record<string, unknown> = { ...data }\n  ;(f.start as number) -= 1 // convert to interbase\n  f.strand = { '+': 1, '-': -1, '.': 0, '?': undefined }[data.strand] // convert strand\n  f.phase = Number(data.frame)\n  f.refName = data.seq_name\n  if (data.score === null) {\n    delete f.score\n  }\n  if (data.frame === null) {\n    delete f.score\n  }\n  const defaultFields = new Set([\n    'start',\n    'end',\n    'seq_name',\n    'score',\n    'featureType',\n    'source',\n    'frame',\n    'strand',\n  ])\n  for (const a of Object.keys(data.attributes)) {\n    let b = a.toLowerCase()\n    if (defaultFields.has(b)) {\n      // add \"suffix\" to tag name if it already exists\n      // reproduces behavior of NCList\n      b += '2'\n    }\n    if (data.attributes[a] !== null) {\n      let attr = data.attributes[a]\n      if (Array.isArray(attr) && attr.length === 1) {\n        // gtf uses double quotes for text values in the attributes column, remove them\n        const formattedAttr = attr[0].replace(/^\"|\"$/g, '')\n        attr = formattedAttr\n      }\n      f[b] = attr\n    }\n  }\n  f.refName = f.seq_name\n  f.type = f.featureType\n\n  // the SimpleFeature constructor takes care of recursively inflating subfeatures\n  if (data.child_features && data.child_features.length > 0) {\n    f.subfeatures = data.child_features.flatMap(childLocs =>\n      childLocs.map(childLoc => featureData(childLoc)),\n    )\n  }\n\n  delete f.child_features\n  delete f.data\n  delete f.derived_features\n  // eslint-disable-next-line no-underscore-dangle\n  delete f._linehash\n  delete f.attributes\n  delete f.seq_name\n  delete f.featureType\n  delete f.frame\n\n  if (f.transcript_id) {\n    f.name = f.transcript_id\n  }\n  return f\n}\n","import {\n  BaseFeatureDataAdapter,\n  BaseOptions,\n} from '@jbrowse/core/data_adapters/BaseAdapter'\nimport { NoAssemblyRegion } from '@jbrowse/core/util/types'\nimport { openLocation } from '@jbrowse/core/util/io'\nimport { ObservableCreate } from '@jbrowse/core/util/rxjs'\nimport IntervalTree from '@flatten-js/interval-tree'\nimport { SimpleFeature, Feature } from '@jbrowse/core/util'\nimport { unzip } from '@gmod/bgzf-filehandle'\nimport gtf from '@gmod/gtf'\n\n// locals\nimport { FeatureLoc, featureData } from '../util'\n\nfunction isGzip(buf: Buffer) {\n  return buf[0] === 31 && buf[1] === 139 && buf[2] === 8\n}\n\nexport default class extends BaseFeatureDataAdapter {\n  protected gtfFeatures?: Promise<{\n    feats: { [key: string]: string[] }\n  }>\n\n  protected intervalTrees: {\n    [key: string]: Promise<IntervalTree | undefined> | undefined\n  } = {}\n\n  private async loadDataP(opts: BaseOptions = {}) {\n    const gtfLoc = this.getConf('gtfLocation')\n    const buffer = await openLocation(gtfLoc, this.pluginManager).readFile(opts)\n\n    const buf = isGzip(buffer) ? await unzip(buffer) : buffer\n    // 512MB  max chrome string length is 512MB\n    if (buf.length > 536_870_888) {\n      throw new Error('Data exceeds maximum string length (512MB)')\n    }\n    const data = new TextDecoder('utf8', { fatal: true }).decode(buf)\n\n    const lines = data\n      .split(/\\n|\\r\\n|\\r/)\n      .filter(f => !!f && !f.startsWith('#'))\n    const feats = {} as { [key: string]: string[] }\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i]\n      if (line.startsWith('#')) {\n        continue\n      }\n      const tab = line.indexOf('\\t')\n      const refName = line.slice(0, tab)\n      if (!feats[refName]) {\n        feats[refName] = []\n      }\n      feats[refName].push(lines[i])\n    }\n\n    return { feats }\n  }\n\n  private async loadData(opts: BaseOptions = {}) {\n    if (!this.gtfFeatures) {\n      this.gtfFeatures = this.loadDataP(opts).catch(e => {\n        this.gtfFeatures = undefined\n        throw e\n      })\n    }\n\n    return this.gtfFeatures\n  }\n\n  public async getRefNames(opts: BaseOptions = {}) {\n    const { feats } = await this.loadData(opts)\n    return Object.keys(feats)\n  }\n\n  private async loadFeatureIntervalTreeHelper(refName: string) {\n    const { feats } = await this.loadData()\n    const lines = feats[refName]\n    if (!lines) {\n      return undefined\n    }\n    const data = gtf.parseStringSync(lines.join('\\n'), {\n      parseFeatures: true,\n      parseComments: false,\n      parseDirectives: false,\n      parseSequences: false,\n    }) as FeatureLoc[][]\n\n    const intervalTree = new IntervalTree()\n    const ret = data.flat().map(\n      (f, i) =>\n        new SimpleFeature({\n          data: featureData(f),\n          id: `${this.id}-${refName}-${i}`,\n        }),\n    )\n\n    for (let i = 0; i < ret.length; i++) {\n      const obj = ret[i]\n      intervalTree.insert([obj.get('start'), obj.get('end')], obj)\n    }\n    return intervalTree\n  }\n\n  private async loadFeatureIntervalTree(refName: string) {\n    if (!this.intervalTrees[refName]) {\n      this.intervalTrees[refName] = this.loadFeatureIntervalTreeHelper(\n        refName,\n      ).catch(e => {\n        this.intervalTrees[refName] = undefined\n        throw e\n      })\n    }\n    return this.intervalTrees[refName]\n  }\n\n  public getFeatures(query: NoAssemblyRegion, opts: BaseOptions = {}) {\n    return ObservableCreate<Feature>(async observer => {\n      try {\n        const { start, end, refName } = query\n        const intervalTree = await this.loadFeatureIntervalTree(refName)\n        intervalTree?.search([start, end]).forEach(f => observer.next(f))\n        observer.complete()\n      } catch (e) {\n        observer.error(e)\n      }\n    }, opts.signal)\n  }\n  public freeResources(/* { region } */) {}\n}\n","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatFile = formatFile;\nexports.formatStream = formatStream;\nexports.formatSync = formatSync;\nexports.parseFile = parseFile;\nexports.parseStream = parseStream;\nexports.parseStringSync = parseStringSync;\n\nvar _parse = _interopRequireDefault(require(\"./parse\"));\n\nvar _util = require(\"./util\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar _require = require('stream'),\n    Transform = _require.Transform;\n\nvar Decoder = require('string_decoder').StringDecoder; // don't load fs native module if running in webpacked code\n// eslint-disable-next-line camelcase\n\n\nvar fs = typeof __webpack_require__ !== 'function' ? require('fs') : null; // call a callback on the next process tick if running in\n// an environment that supports it\n\nfunction _callback(callback) {\n  if (process && process.nextTick) process.nextTick(callback);else callback();\n} // shared arg processing for the parse routines\n\n\nfunction _processParseOptions(options) {\n  var additionalDefaults = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var out = Object.assign({\n    parseFeatures: true,\n    parseDirectives: false,\n    parseSequences: true,\n    parseComments: false\n  }, additionalDefaults, options);\n\n  if (options.parseAll) {\n    out.parseFeatures = true;\n    out.parseDirectives = true;\n    out.parseComments = true;\n    out.parseSequences = true;\n  }\n\n  return out;\n}\n\nvar GTFTransform = /*#__PURE__*/function (_Transform) {\n  _inherits(GTFTransform, _Transform);\n\n  var _super = _createSuper(GTFTransform);\n\n  function GTFTransform() {\n    var _this;\n\n    var inputOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, GTFTransform);\n\n    var options = _processParseOptions(inputOptions);\n\n    _this = _super.call(this, {\n      objectMode: true\n    });\n    _this.encoding = inputOptions.encoding || 'utf8';\n    _this.decoder = new Decoder();\n    _this.textBuffer = '';\n\n    var push = _this.push.bind(_assertThisInitialized(_this));\n\n    _this.parser = new _parse.default({\n      featureCallback: options.parseFeatures ? push : null,\n      directiveCallback: options.parseDirectives ? push : null,\n      commentCallback: options.parseComments ? push : null,\n      sequenceCallback: options.parseSequences ? push : null,\n      errorCallback: function errorCallback(err) {\n        return _this.emit('error', err);\n      },\n      bufferSize: options.bufferSize\n    });\n    return _this;\n  }\n\n  _createClass(GTFTransform, [{\n    key: \"_addLine\",\n    value: function _addLine(data) {\n      var line = data.toString('utf8');\n\n      if (line) {\n        this.parser.addLine(line);\n      }\n    }\n  }, {\n    key: \"_nextText\",\n    value: function _nextText(buffer) {\n      var _this2 = this;\n\n      var pieces = (this.textBuffer + buffer).split(/\\r?\\n/);\n      this.textBuffer = pieces.pop();\n\n      if (this.maxLineLength && this.textBuffer.length > this.maxLineLength) {\n        this.emit('error', new Error('maximum line size exceeded'));\n        return;\n      }\n\n      pieces.forEach(function (piece) {\n        return _this2._addLine(piece);\n      });\n    }\n  }, {\n    key: \"_transform\",\n    value: function _transform(chunk, encoding, callback) {\n      this._nextText(this.decoder.write(chunk));\n\n      _callback(callback);\n    }\n  }, {\n    key: \"_flush\",\n    value: function _flush(callback) {\n      if (this.decoder.end) this._nextText(this.decoder.end());\n      if (this.textBuffer != null) this._addLine(this.textBuffer);\n      this.parser.finish();\n\n      _callback(callback);\n    }\n  }]);\n\n  return GTFTransform;\n}(Transform);\n/**\n * Parse a stream of text data into a stream of feature,\n * directive, and comment objects.\n *\n * @param {Object} options optional options object\n * @param {string} options.encoding text encoding of the input GTF. default 'utf8'\n * @param {boolean} options.parseAll default false.  if true, will parse all items. overrides other flags\n * @param {boolean} options.parseFeatures default true\n * @param {boolean} options.parseDirectives default false\n * @param {boolean} options.parseComments default false\n * @param {boolean} options.parseSequences default true\n * @param {Number} options.bufferSize maximum number of GTF lines to buffer. defaults to 1000\n * @returns {ReadableStream} stream (in objectMode) of parsed items\n */\n\n\nfunction parseStream() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var newOptions = Object.assign({\n    bufferSize: 1000\n  }, options);\n  return new GTFTransform(newOptions);\n}\n/**\n * Read and parse a GTF file from the filesystem.\n *\n * @param {string} filename the filename of the file to parse\n * @param {Object} options optional options object\n * @param {string} options.encoding the file's string encoding, defaults to 'utf8'\n * @param {boolean} options.parseAll default false.  if true, will parse all items. overrides other flags\n * @param {boolean} options.parseFeatures default true\n * @param {boolean} options.parseDirectives default false\n * @param {boolean} options.parseComments default false\n * @param {boolean} options.parseSequences default true\n * @param {Number} options.bufferSize maximum number of GTF lines to buffer. defaults to 1000\n * @returns {ReadableStream} stream (in objectMode) of parsed items\n */\n\n\nfunction parseFile(filename, options) {\n  return fs.createReadStream(filename).pipe(parseStream(options));\n}\n/**\n * Synchronously parse a string containing GTF and return\n * an arrayref of the parsed items.\n *\n * @param {string} str\n * @param {Object} inputOptions optional options object\n * @param {boolean} inputOptions.parseAll default false.  if true, will parse all items. overrides other flags\n * @param {boolean} inputOptions.parseFeatures default true\n * @param {boolean} inputOptions.parseDirectives default false\n * @param {boolean} inputOptions.parseComments default false\n * @param {boolean} inputOptions.parseSequences default true\n * @returns {Array} array of parsed features, directives, and/or comments\n */\n\n\nfunction parseStringSync(str) {\n  var inputOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (!str) return [];\n\n  var options = _processParseOptions(inputOptions);\n\n  var items = [];\n  var push = items.push.bind(items);\n  var parser = new _parse.default({\n    featureCallback: options.parseFeatures ? push : null,\n    directiveCallback: options.parseDirectives ? push : null,\n    commentCallback: options.parseComments ? push : null,\n    sequenceCallback: options.parseSequences ? push : null,\n    bufferSize: Infinity,\n    errorCallback: function errorCallback(err) {\n      throw err;\n    }\n  });\n  str.split(/\\r?\\n/).forEach(parser.addLine.bind(parser));\n  parser.finish();\n  return items;\n}\n/**\n * Format an array of GTF items (features,directives,comments) into string of GTF.\n * Does not insert synchronization (###) marks.\n * Does not insert directive if it's not already there.\n *\n * @param {Array[Object]} items\n * @returns {String} the formatted GTF\n */\n\n\nfunction formatSync(items) {\n  // sort items into seq and other\n  var other = [];\n  var sequences = [];\n  items.forEach(function (i) {\n    if (i.sequence) {\n      sequences.push(i);\n    } else {\n      other.push(i);\n    }\n  });\n  var str = other.map(_util.formatItem).join('');\n\n  if (sequences.length) {\n    str += '##FASTA\\n';\n    str += sequences.map(_util.formatSequence).join('');\n  }\n\n  return str;\n}\n\nvar FormattingTransform = /*#__PURE__*/function (_Transform2) {\n  _inherits(FormattingTransform, _Transform2);\n\n  var _super2 = _createSuper(FormattingTransform);\n\n  function FormattingTransform() {\n    var _this3;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, FormattingTransform);\n\n    _this3 = _super2.call(this, Object.assign(options, {\n      objectMode: true\n    }));\n    _this3.linesSinceLastSyncMark = 0;\n    _this3.minLinesBetweenSyncMarks = options.minSyncLines || 100;\n    _this3.insertVersionDirective = options.insertVersionDirective || false;\n    _this3.haveWeEmittedData = false;\n    _this3.fastaMode = false;\n    return _this3;\n  }\n\n  _createClass(FormattingTransform, [{\n    key: \"_transform\",\n    value: function _transform(chunk, encoding, callback) {\n      // if we have not emitted anything yet, and this first\n      // chunk is not a gtf directive, emit one\n      var str;\n\n      if (!this.haveWeEmittedData && this.insertVersionDirective && (chunk[0] || chunk).directive !== 'gtf') {\n        this.push('##gtf\\n');\n      } // if it's a sequence chunk coming down, emit a FASTA directive and\n      // change to FASTA mode\n\n\n      if (chunk.sequence && !this.fastaMode) {\n        this.push('##FASTA\\n');\n        this.fastaMode = true;\n      }\n\n      if (Array.isArray(chunk)) {\n        str = chunk.map(_util.formatItem).join('');\n      } else {\n        str = (0, _util.formatItem)(chunk);\n      }\n\n      this.push(str);\n\n      if (this.linesSinceLastSyncMark >= this.minLinesBetweenSyncMarks) {\n        this.push('###\\n');\n        this.linesSinceLastSyncMark = 0;\n      } else {\n        // count the number of newlines in this chunk\n        var count = 0;\n\n        for (var i = 0; i < str.length; i += 1) {\n          if (str[i] === '\\n') count += 1;\n        }\n\n        this.linesSinceLastSyncMark += count;\n      }\n\n      this.haveWeEmittedData = true;\n\n      _callback(callback);\n    }\n  }]);\n\n  return FormattingTransform;\n}(Transform);\n/**\n * Format a stream of items (of the type produced\n * by this script) into a stream of GTF text.\n *\n * Inserts synchronization (###) marks automatically.\n *\n * @param {Object} options\n * @param {Object} options.minSyncLines minimum number of lines between ### marks. default 100\n * @param {Boolean} options.insertVersionDirective\n *  if the first item in the stream is not a ##gff-version directive, insert one to show it's gtf\n *  default false\n */\n\n\nfunction formatStream(options) {\n  return new FormattingTransform(options);\n}\n/**\n * Format a stream of items (of the type produced\n * by this script) into a GTF file and write it to the filesystem.\n\n * Inserts synchronization (###) marks and a ##gtf\n * directive automatically (if one is not already present).\n *\n * @param {ReadableStream} stream the stream to write to the file\n * @param {String} filename the file path to write to\n * @param {Object} options\n * @param {String} options.encoding default 'utf8'. encoding for the written file\n * @param {Number} options.minSyncLines\n *  minimum number of lines between sync (###) marks. default 100\n * @param {Boolean} options.insertVersionDirective\n *  if the first item in the stream is not a ##gtf directive, insert one.\n *  default false\n * @returns {Promise} promise for the written filename\n */\n\n\nfunction formatFile(stream, filename) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var newOptions = Object.assign({\n    insertVersionDirective: false\n  }, options);\n  return new Promise(function (resolve, reject) {\n    stream.pipe(new FormattingTransform(newOptions)).on('end', function () {\n      return resolve(filename);\n    }).on('error', reject).pipe(fs.createWriteStream(filename, {\n      encoding: newOptions.encoding || 'utf8'\n    }));\n  });\n}","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _api = require(\"./api\");\n\nvar util = _interopRequireWildcard(require(\"./util\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar _default = {\n  parseStream: _api.parseStream,\n  parseFile: _api.parseFile,\n  parseStringSync: _api.parseStringSync,\n  formatSync: _api.formatSync,\n  formatStream: _api.formatStream,\n  formatFile: _api.formatFile,\n  util: util\n};\nexports.default = _default;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar GTF = _interopRequireWildcard(require(\"./util\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar containerAttributes = {\n  Parent: 'child_features',\n  Derives_from: 'derived_features'\n}; // Note this is a reimplementation of https://github.com/GMOD/jbrowse/src/JBrowse/Store/SeqFeature/GTF/Parser.js\n\nvar FASTAParser = /*#__PURE__*/function () {\n  function FASTAParser(seqCallback) {\n    _classCallCheck(this, FASTAParser);\n\n    this.seqCallback = seqCallback;\n    this.currentSequence = undefined;\n  }\n\n  _createClass(FASTAParser, [{\n    key: \"addLine\",\n    value: function addLine(line) {\n      var defMatch = /^>\\s*(\\S+)\\s*(.*)/.exec(line);\n\n      if (defMatch) {\n        this._flush();\n\n        this.currentSequence = {\n          id: defMatch[1],\n          sequence: ''\n        };\n        if (defMatch[2]) this.currentSequence.description = defMatch[2].trim();\n      } else if (this.currentSequence && /\\S/.test(line)) {\n        this.currentSequence.sequence += line.replace(/\\s/g, '');\n      }\n    }\n  }, {\n    key: \"_flush\",\n    value: function _flush() {\n      if (this.currentSequence) this.seqCallback(this.currentSequence);\n    }\n  }, {\n    key: \"finish\",\n    value: function finish() {\n      this._flush();\n    }\n  }]);\n\n  return FASTAParser;\n}();\n\nvar Parser = /*#__PURE__*/function () {\n  function Parser(args) {\n    _classCallCheck(this, Parser);\n\n    var nullFunc = function nullFunc() {};\n\n    Object.assign(this, {\n      featureCallback: args.featureCallback || nullFunc,\n      endCallback: args.endCallback || nullFunc,\n      commentCallback: args.commentCallback || nullFunc,\n      errorCallback: args.errorCallback || nullFunc,\n      directiveCallback: args.directiveCallback || nullFunc,\n      sequenceCallback: args.sequenceCallback || nullFunc,\n      // number of lines to buffer\n      bufferSize: args.bufferSize === undefined ? 1000 : args.bufferSize,\n      // features that we have to keep on hand for now because they\n      // might be referenced by something else\n      _underConstructionTopLevel: [],\n      // index of the above by ID\n      _underConstructionById: {},\n      _completedReferences: {},\n      // features that reference something we have not seen yet\n      // structured as:\n      // {  'some_id' : {\n      //     'Parent' : [ orphans that have a Parent attr referencing it ],\n      //     'Derives_from' : [ orphans that have a Derives_from attr referencing it ],\n      //    }\n      // }\n      _underConstructionOrphans: {},\n      // if this is true, the parser ignores the\n      // rest of the lines in the file.  currently\n      // set when the file switches over to FASTA\n      eof: false,\n      lineNumber: 0\n    });\n  }\n\n  _createClass(Parser, [{\n    key: \"addLine\",\n    value: function addLine(line) {\n      // if we have transitioned to a fasta section, just delegate to that parser\n      if (this.fastaParser) {\n        this.fastaParser.addLine(line);\n        return;\n      }\n\n      if (this.eof) {\n        // otherwise, if we are done, ignore this line\n        return;\n      }\n\n      this.lineNumber += 1;\n\n      if (/^\\s*[^#\\s>]/.test(line)) {\n        // feature line, most common case\n        this._bufferLine(line);\n\n        return;\n      }\n\n      var match = /^\\s*(#+)(.*)/.exec(line);\n\n      if (match) {\n        // directive or comment\n        // eslint-disable-next-line prefer-const\n        var _match = _slicedToArray(match, 3),\n            hashsigns = _match[1],\n            contents = _match[2];\n\n        if (hashsigns.length === 3) {\n          // sync directive, all forward-references are resolved.\n          this._emitAllUnderConstructionFeatures();\n        } else if (hashsigns.length === 2) {\n          var directive = GTF.parseDirective(line);\n\n          if (directive.directive === 'FASTA') {\n            this._emitAllUnderConstructionFeatures();\n\n            this.eof = true;\n            this.fastaParser = new FASTAParser(this.sequenceCallback);\n          } else {\n            this._emitItem(directive);\n          }\n        } else {\n          contents = contents.replace(/\\s*/, '');\n\n          this._emitItem({\n            comment: contents\n          });\n        }\n      } else if (/^\\s*$/.test(line)) {// blank line, do nothing\n      } else if (/^\\s*>/.test(line)) {\n        // implicit beginning of a FASTA section\n        this._emitAllUnderConstructionFeatures();\n\n        this.eof = true;\n        this.fastaParser = new FASTAParser(this.sequenceCallback);\n        this.fastaParser.addLine(line);\n      } else {\n        // it's a parse error\n        var errLine = line.replace(/\\r?\\n?$/g, '');\n        throw new Error(\"GTF parse error.  Cannot parse '\".concat(errLine, \"'.\"));\n      }\n    }\n  }, {\n    key: \"_emitItem\",\n    value: function _emitItem(i) {\n      if (i[0]) {\n        this.featureCallback(i);\n      } else if (i.directive) {\n        this.directiveCallback(i);\n      } else if (i.comment) {\n        this.commentCallback(i);\n      }\n    }\n  }, {\n    key: \"finish\",\n    value: function finish() {\n      this._emitAllUnderConstructionFeatures();\n\n      if (this.fastaParser) {\n        this.fastaParser.finish();\n      }\n\n      this.endCallback();\n    }\n  }, {\n    key: \"_enforceBufferSizeLimit\",\n    value: function _enforceBufferSizeLimit() {\n      var _this = this;\n\n      var additionalItemCount = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      var _unbufferItem = function _unbufferItem(item) {\n        if (item && item[0] && item[0].attributes && item[0].attributes.ID && item[0].attributes.ID[0]) {\n          var ids = item[0].attributes.ID;\n          ids.forEach(function (id) {\n            delete _this._underConstructionById[id];\n            delete _this._completedReferences[id];\n          });\n          item.forEach(function (i) {\n            if (i.child_features) i.child_features.forEach(function (c) {\n              return _unbufferItem(c);\n            });\n            if (i.derived_features) i.derived_features.forEach(function (d) {\n              return _unbufferItem(d);\n            });\n          });\n        }\n      };\n\n      while (this._underConstructionTopLevel.length + additionalItemCount > this.bufferSize) {\n        var item = this._underConstructionTopLevel.shift();\n\n        this._emitItem(item);\n\n        _unbufferItem(item);\n      }\n    }\n    /**\n     * return all under-construction features, called when we know\n     * there will be no additional data to attach to them\n     * @private\n     */\n\n  }, {\n    key: \"_emitAllUnderConstructionFeatures\",\n    value: function _emitAllUnderConstructionFeatures() {\n      this._underConstructionTopLevel.forEach(this._emitItem.bind(this));\n\n      this._underConstructionTopLevel = [];\n      this._underConstructionById = {};\n      this._completedReferences = {}; // if we have any orphans hanging around still, this is a\n      // problem. die with a parse error\n\n      if (Object.values(this._underConstructionOrphans).filter(function (entry) {\n        return Object.keys(entry).length;\n      }).length) {\n        throw new Error(\"some features reference other features that do not exist in the file (or in the same '###' scope). \".concat(JSON.stringify(this._underConstructionOrphans)));\n      }\n    } // do the right thing with a newly-parsed feature line\n\n  }, {\n    key: \"_bufferLine\",\n    value: function _bufferLine(line) {\n      var _this2 = this;\n\n      var featureLine = GTF.parseFeature(line);\n      featureLine.child_features = [];\n      featureLine.derived_features = []; // featureLine._lineNumber = this.lineNumber //< debugging aid\n\n      var featureNumber = this.lineNumber; // no such thing as unique ID in GTF. make one up.\n\n      var isTranscript = featureLine.featureType === 'transcript'; // trying to support the Cufflinks convention of adding a transcript line\n      // NOTE: a feature is an arrayref of one or more feature lines.\n\n      var ids = isTranscript ? featureLine.attributes.transcript_id || [] : [featureNumber];\n      var parents = isTranscript ? [] : featureLine.attributes.transcript_id || [];\n      var derives = featureLine.attributes.Derives_from || [];\n\n      if (!ids.length && !parents.length && !derives.length) {\n        // if it has no IDs and does not refer to anything, we can just\n        // output it\n        this._emitItem([featureLine]);\n\n        return;\n      }\n\n      function createTranscript(feature) {\n        var result = JSON.parse(JSON.stringify(feature));\n        result.featureType = 'transcript'; // result.attributes={'transcript_id':result.attributes.transcript_id, 'gene_id':result.attributes.gene_id};\n\n        return GTF.formatFeature(result);\n      } // here we just create transcript features with children features and let 'gene_ids' simply be attributes not a feature in themselves\n\n\n      parents.forEach(function (parent) {\n        var underConst = _this2._underConstructionById[parent];\n\n        if (!underConst) {\n          _this2._bufferLine(createTranscript(featureLine));\n        }\n      });\n      var feature;\n      ids.forEach(function (id) {\n        var existing = _this2._underConstructionById[id];\n\n        if (existing) {\n          existing.push(featureLine);\n          feature = existing;\n        } else {\n          // haven't seen it yet, so buffer it so we can attach\n          // child features to it\n          feature = [featureLine];\n\n          _this2._enforceBufferSizeLimit(1);\n\n          if (!parents.length && !derives.length) {\n            _this2._underConstructionTopLevel.push(feature);\n          }\n\n          _this2._underConstructionById[id] = feature; // see if we have anything buffered that refers to it\n\n          _this2._resolveReferencesTo(feature, id);\n        }\n      }); // try to resolve all its references\n\n      this._resolveReferencesFrom(feature || [featureLine], {\n        Parent: parents,\n        Derives_from: derives\n      }, ids);\n    }\n  }, {\n    key: \"_resolveReferencesTo\",\n    value: function _resolveReferencesTo(feature, id) {\n      var references = this._underConstructionOrphans[id]; //   references is of the form\n      //   {\n      //     'Parent' : [ orphans that have a Parent attr referencing this feature ],\n      //     'Derives_from' : [ orphans that have a Derives_from attr referencing this feature ],\n      //    }\n\n      if (!references) return;\n      Object.keys(references).forEach(function (attrname) {\n        var pname = containerAttributes[attrname] || attrname.toLowerCase();\n        feature.forEach(function (loc) {\n          var _loc$pname;\n\n          (_loc$pname = loc[pname]).push.apply(_loc$pname, _toConsumableArray(references[attrname]));\n\n          delete references[attrname];\n        });\n      });\n    }\n  }, {\n    key: \"_parseError\",\n    value: function _parseError(message) {\n      this.eof = true;\n      this.errorCallback(\"\".concat(this.lineNumber, \": \").concat(message));\n    }\n  }, {\n    key: \"_resolveReferencesFrom\",\n    value: function _resolveReferencesFrom(feature, references, ids) {\n      var _this3 = this;\n\n      // this is all a bit more awkward in javascript than it was in perl\n      function postSet(obj, slot1, slot2) {\n        var subObj = obj[slot1];\n\n        if (!subObj) {\n          subObj = {}; // eslint-disable-next-line no-param-reassign\n\n          obj[slot1] = subObj;\n        }\n\n        var returnVal = subObj[slot2] || false;\n        subObj[slot2] = true;\n        return returnVal;\n      }\n\n      function expandFeature(parentFeature, childFeature) {\n        // eslint-disable-next-line no-param-reassign\n        parentFeature[0].start = Math.min(parentFeature[0].start, childFeature[0].start); // eslint-disable-next-line no-param-reassign\n\n        parentFeature[0].end = Math.max(parentFeature[0].end, childFeature[0].end);\n      }\n\n      Object.entries(references).forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            attrname = _ref2[0],\n            toIds = _ref2[1];\n\n        var pname;\n        toIds.forEach(function (toId) {\n          var otherFeature = _this3._underConstructionById[toId];\n\n          if (otherFeature) {\n            expandFeature(otherFeature, feature);\n            if (!pname) pname = containerAttributes[attrname] || attrname.toLowerCase();\n\n            if (!ids.filter(function (id) {\n              return postSet(_this3._completedReferences, id, \"\".concat(attrname, \",\").concat(toId));\n            }).length) {\n              otherFeature.forEach(function (location) {\n                location[pname].push(feature);\n              });\n            }\n          } else {\n            if (!_this3._underConstructionOrphans[toId]) _this3._underConstructionOrphans[toId] = {};\n            if (!_this3._underConstructionOrphans[toId][attrname]) _this3._underConstructionOrphans[toId][attrname] = [];\n\n            _this3._underConstructionOrphans[toId][attrname].push(feature);\n          }\n        });\n      });\n    }\n  }]);\n\n  return Parser;\n}();\n\nexports.default = Parser;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.escape = escape;\nexports.escapeColumn = escapeColumn;\nexports.formatAttributes = formatAttributes;\nexports.formatComment = formatComment;\nexports.formatDirective = formatDirective;\nexports.formatFeature = formatFeature;\nexports.formatItem = formatItem;\nexports.formatSequence = formatSequence;\nexports.parseAttributes = parseAttributes;\nexports.parseDirective = parseDirective;\nexports.parseFeature = parseFeature;\nexports.unescape = unescape;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/** @module util */\n// Forks @gmod/gff-js and adapts it to parse and format GTF.\nvar fieldNames = ['seq_name', 'source', 'featureType', 'start', 'end', 'score', 'strand', 'frame', 'attributes']; // TODO: check about enconding/escaping in gtf 9th column\n\n/**\n * Unescape a string/text value used in a GTF attribute.\n * Textual attributes should be surrounded by double quotes\n * source info:\n * https://mblab.wustl.edu/GTF22.html\n * https://en.wikipedia.org/wiki/Gene_transfer_format\n *\n * @param {String} s\n * @returns {String}\n */\n\nfunction unescape(s) {\n  if (s === null) {\n    return null;\n  }\n\n  return String(s).replace(/%([0-9A-Fa-f]{2})/g, function (_, seq) {\n    return String.fromCharCode(parseInt(seq, 16));\n  });\n}\n/**\n * Escape a value for use in a GTF attribute value.\n *\n * @param {String} s\n * @returns {String}\n */\n\n\nfunction _escape(regex, s) {\n  return String(s).replace(regex, function (ch) {\n    var hex = ch.charCodeAt(0).toString(16).toUpperCase(); // lol, apparently there's no native function for fixed-width hex output\n\n    if (hex.length < 2) hex = \"0\".concat(hex);\n    return \"%\".concat(hex);\n  });\n}\n\nfunction escape(s) {\n  // eslint-disable-next-line no-control-regex\n  return _escape(/[\\n;\\r\\t=%&,\\x00-\\x1f\\x7f-\\xff]/g, s);\n}\n/**\n * Escape a value for use in a GTF column value.\n *\n * @param {String} s\n * @returns {String}\n */\n\n\nfunction escapeColumn(s) {\n  // eslint-disable-next-line no-control-regex\n  return _escape(/[\\n\\r\\t%\\x00-\\x1f\\x7f-\\xff]/g, s);\n}\n/**\n * Parse the 9th column (attributes) of a GTF feature line.\n *\n * @param {String} attrString\n * @returns {Object}\n */\n\n\nfunction parseAttributes(attrString) {\n  if (!(attrString && attrString.length) || attrString === '.') return {};\n  var attrs = {};\n  attrString.replace(/\\r?\\n$/, '').slice(0, -1) // need to remove the last semicolon in the attributes\n  .split(';').forEach(function (attribute) {\n    var _arec;\n\n    if (!attribute) return;\n    var attr = attribute.trim().split(' ');\n    if (!(attr[1] && attr[1].length)) return;\n    attr[0] = attr[0].trim();\n    var arec = attrs[attr[0].trim()];\n\n    if (!arec) {\n      arec = [];\n      attrs[attr[0]] = arec;\n    } // arec.push(unescape(attr[1].trim()))\n\n\n    (_arec = arec).push.apply(_arec, _toConsumableArray(attr[1].split(',').map(function (s) {\n      return s.trim();\n    }).map(unescape)));\n  });\n  return attrs;\n}\n/**\n * Parse a GTF feature line.\n *\n * @param {String} line\n * returns the parsed line in an object\n */\n\n\nfunction parseFeature(line) {\n  // assummed that there are no comments at the end of a line\n  // split the line into columns and replace '.' with null in each column\n  var f = line.split('\\t').map(function (a) {\n    return a === '.' ? null : a;\n  }); // unescape only the seq_name, source, and feature columns\n\n  f[0] = unescape(f[0]);\n  f[1] = unescape(f[1]);\n  f[2] = unescape(f[2]);\n  f[8] = parseAttributes(f[8]);\n  var parsed = {};\n\n  for (var i = 0; i < fieldNames.length; i += 1) {\n    parsed[fieldNames[i]] = f[i] === '.' ? null : f[i];\n  }\n\n  if (parsed.start !== null) parsed.start = parseInt(parsed.start, 10);\n  if (parsed.end !== null) parsed.end = parseInt(parsed.end, 10);\n  if (parsed.score !== null) parsed.score = parseFloat(parsed.score, 10);\n  if (parsed.strand != null) parsed.strand = parsed.strand;\n  return parsed;\n}\n/**\n * Parse a GTF directive/comment line.\n *\n * @param {String} line\n * @returns {Object} the information in the directive\n */\n\n\nfunction parseDirective(line) {\n  var match = /^\\s*##\\s*(\\S+)\\s*(.*)/.exec(line); // const match = /^\\s*\\#\\#\\s*(\\S+)\\s*(.*)/.exec(line)\n\n  if (!match) return null; // let [, name, contents] = match\n\n  var name = match[1];\n  var contents = match[2];\n  var parsed = {\n    directive: name\n  };\n\n  if (contents.length) {\n    contents = contents.replace(/\\r?\\n$/, '');\n    parsed.value = contents;\n  } // do a little additional parsing for sequence-region and genome-build directives\n\n\n  if (name === 'sequence-region') {\n    var _contents$split = contents.split(/\\s+/, 3),\n        _contents$split2 = _slicedToArray(_contents$split, 3),\n        seqId = _contents$split2[0],\n        contentStart = _contents$split2[1],\n        contentEnd = _contents$split2[2];\n\n    parsed.seq_id = seqId;\n    parsed.start = contentStart && contentStart.replace(/\\D/g, '');\n    parsed.end = contentEnd && contentEnd.replace(/\\D/g, '');\n  } else if (name === 'genome-build') {\n    var _contents$split3 = contents.split(/\\s+/, 2),\n        _contents$split4 = _slicedToArray(_contents$split3, 2),\n        source = _contents$split4[0],\n        buildname = _contents$split4[1];\n\n    parsed.source = source;\n    parsed.buildname = buildname;\n  }\n\n  return parsed;\n}\n/**\n * Format an attributes object into a string suitable for the 9th column of GTF.\n *\n * @param {Object} attrs\n */\n\n\nfunction formatAttributes(attrs) {\n  var attrOrder = [];\n  Object.keys(attrs).forEach(function (tag) {\n    var val = attrs[tag];\n    var valstring; // eslint-disable-next-line no-prototype-builtins\n\n    if (val.hasOwnProperty('toString')) {\n      valstring = escape(val.toString());\n    } else if (Array.isArray(val.values)) {\n      valstring = val.values.map(escape).join(',');\n    } else if (Array.isArray(val)) {\n      valstring = val.map(escape).join(',');\n    } else {\n      valstring = escape(val);\n    }\n\n    attrOrder.push(\"\".concat(escape(tag), \" \").concat(valstring));\n  });\n  return attrOrder.length ? attrOrder.join('; ').concat(';') : '.';\n}\n\nvar translateStrand = ['-', '.', '+'];\n\nfunction _formatSingleFeature(f, seenFeature) {\n  var attrString = f.attributes === null || f.attributes === undefined ? '.' : formatAttributes(f.attributes);\n  var fields = [];\n\n  for (var i = 0; i < 8; i += 1) {\n    var val = f[fieldNames[i]]; // deserialize strand\n\n    if (i === 6) {\n      fields[i] = val === null || val === undefined ? '.' : translateStrand[val + 1] || val;\n    } else {\n      fields[i] = val === null || val === undefined ? '.' : escapeColumn(String(val));\n    }\n  }\n\n  fields[8] = attrString;\n  var formattedString = \"\".concat(fields.join('\\t'), \"\\n\"); // if we have already output this exact feature, skip it\n\n  if (seenFeature[formattedString]) {\n    return '';\n  } // eslint-disable-next-line no-param-reassign\n\n\n  seenFeature[formattedString] = true;\n  return formattedString;\n}\n\nfunction _formatFeature(feature, seenFeature) {\n  if (Array.isArray(feature)) {\n    return feature.map(function (f) {\n      return _formatFeature(f, seenFeature);\n    }).join('');\n  }\n\n  var strings = [_formatSingleFeature(feature, seenFeature)];\n  ['child_features', 'derived_features'].forEach(function (multiSlot) {\n    if (feature[multiSlot]) {\n      strings.push.apply(strings, _toConsumableArray(feature[multiSlot].map(function (f) {\n        return _formatFeature(f, seenFeature);\n      })));\n    }\n  });\n  return strings.join('');\n}\n/**\n * Format a feature object or array of\n * feature objects into one or more lines of GTF.\n *\n * @param {Object|Array[Object]} featureOrFeatures\n */\n\n\nfunction formatFeature(featureOrFeatures) {\n  var seen = {};\n  return _formatFeature(featureOrFeatures, seen);\n}\n/**\n * Format a directive into a line of GTF.\n *\n * @param {Object} directive\n * @returns {String}\n */\n\n\nfunction formatDirective(directive) {\n  var str = \"##\".concat(directive.directive);\n  if (directive.value) str += \" \".concat(directive.value);\n  str += '\\n';\n  return str;\n}\n/**\n * Format a comment into a GTF comment.\n * Yes I know this is just adding a # and a newline.\n *\n * @param {Object} comment\n * @returns {String}\n */\n\n\nfunction formatComment(comment) {\n  return \"# \".concat(comment.comment, \"\\n\");\n}\n/**\n * Format a sequence object as FASTA\n *\n * @param {Object} seq\n * @returns {String} formatted single FASTA sequence\n */\n\n\nfunction formatSequence(seq) {\n  return \">\".concat(seq.id).concat(seq.description ? \" \".concat(seq.description) : '', \"\\n\").concat(seq.sequence, \"\\n\");\n}\n/**\n * Format a directive, comment, or feature,\n * or array of such items, into one or more lines of GTF.\n *\n * @param {Object|Array} itemOrItems\n */\n\n\nfunction formatItem(itemOrItems) {\n  function formatSingleItem(item) {\n    if (item[0] || item.attributes) {\n      return formatFeature(item);\n    }\n\n    if (item.directive) {\n      return formatDirective(item);\n    }\n\n    if (item.sequence) {\n      return formatSequence(item);\n    }\n\n    if (item.comment) {\n      return formatComment(item);\n    }\n\n    return '# (invalid item found during format)\\n';\n  }\n\n  if (Array.isArray(itemOrItems)) {\n    return itemOrItems.map(function (item) {\n      return formatSingleItem(item);\n    });\n  }\n\n  return formatSingleItem(itemOrItems);\n}"],"names":["featureData","data","f","_objectSpread","start","strand","undefined","phase","Number","frame","refName","seq_name","score","defaultFields","Set","_i","_Object$keys","Object","keys","attributes","length","a","b","toLowerCase","has","attr","Array","isArray","formattedAttr","replace","type","featureType","child_features","subfeatures","flatMap","childLocs","map","childLoc","derived_features","_linehash","transcript_id","name","isGzip","buf","_default","_BaseFeatureDataAdapt","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","args","_key","call","apply","concat","gtfFeatures","intervalTrees","_createClass","key","value","_loadDataP","_asyncToGenerator","_regeneratorRuntime","mark","_callee","opts","gtfLoc","buffer","lines","feats","i","line","tab","_args","wrap","_context","prev","next","this","getConf","openLocation","pluginManager","readFile","sent","unzip","t0","Error","TextDecoder","fatal","decode","split","filter","startsWith","abrupt","indexOf","slice","push","stop","_loadData","_callee2","_this2","_args2","_context2","loadDataP","catch","e","_getRefNames","_callee3","_yield$this$loadData","_args3","_context3","loadData","_loadFeatureIntervalTreeHelper","_callee4","_yield$this$loadData2","intervalTree","ret","obj","_this3","_context4","gtf","join","parseFeatures","parseComments","parseDirectives","parseSequences","IntervalTree","flat","SimpleFeature","id","insert","get","_x","_loadFeatureIntervalTree","_callee5","_this4","_context5","loadFeatureIntervalTreeHelper","_x2","query","_this5","ObservableCreate","_ref","_callee6","observer","end","_context6","loadFeatureIntervalTree","search","forEach","complete","error","_x3","signal","BaseFeatureDataAdapter","_typeof","Symbol","iterator","constructor","prototype","defineProperty","exports","formatFile","stream","filename","options","newOptions","assign","insertVersionDirective","Promise","resolve","reject","pipe","FormattingTransform","on","fs","createWriteStream","encoding","formatStream","formatSync","items","other","sequences","sequence","str","_util","formatItem","formatSequence","parseFile","createReadStream","parseStream","parseStringSync","inputOptions","_processParseOptions","bind","parser","_parse","default","featureCallback","directiveCallback","commentCallback","sequenceCallback","bufferSize","Infinity","errorCallback","err","addLine","finish","require","__esModule","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","result","Super","_getPrototypeOf","NewTarget","self","_assertThisInitialized","_possibleConstructorReturn","ReferenceError","getPrototypeOf","Transform","Decoder","_callback","callback","process","nextTick","additionalDefaults","out","parseAll","GTFTransform","_Transform","objectMode","decoder","textBuffer","emit","toString","pieces","pop","maxLineLength","piece","_addLine","chunk","_nextText","write","_Transform2","_super2","linesSinceLastSyncMark","minLinesBetweenSyncMarks","minSyncLines","haveWeEmittedData","fastaMode","directive","count","_api","util","nodeInterop","cache","_getRequireWildcardCache","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","hasOwnProperty","desc","set","_interopRequireWildcard","WeakMap","cacheBabelInterop","cacheNodeInterop","GTF","_toConsumableArray","arr","_arrayLikeToArray","_arrayWithoutHoles","iter","from","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_slicedToArray","_arrayWithHoles","_s","_e","_arr","_n","_d","done","_iterableToArrayLimit","_nonIterableRest","minLen","n","test","len","arr2","containerAttributes","Parent","Derives_from","FASTAParser","seqCallback","currentSequence","defMatch","exec","_flush","description","trim","Parser","nullFunc","endCallback","_underConstructionTopLevel","_underConstructionById","_completedReferences","_underConstructionOrphans","eof","lineNumber","fastaParser","_bufferLine","match","_match","hashsigns","contents","_emitAllUnderConstructionFeatures","parseDirective","_emitItem","comment","errLine","additionalItemCount","_unbufferItem","item","ID","c","d","shift","values","entry","JSON","stringify","featureLine","parseFeature","feature","featureNumber","isTranscript","ids","parents","derives","parent","parse","formatFeature","createTranscript","existing","_enforceBufferSizeLimit","_resolveReferencesTo","_resolveReferencesFrom","references","attrname","pname","loc","_loc$pname","message","entries","_ref2","toId","parentFeature","childFeature","otherFeature","Math","min","max","slot1","slot2","subObj","returnVal","postSet","location","escape","escapeColumn","formatAttributes","formatComment","formatDirective","itemOrItems","formatSingleItem","parseAttributes","parsed","_contents$split2","seqId","contentStart","contentEnd","seq_id","_contents$split4","source","buildname","unescape","fieldNames","parseInt","parseFloat","s","String","_","seq","fromCharCode","_escape","regex","ch","hex","charCodeAt","toUpperCase","attrString","attrs","attribute","_arec","arec","attrOrder","tag","valstring","val","translateStrand","_formatSingleFeature","seenFeature","fields","formattedString","_formatFeature","strings","multiSlot","featureOrFeatures"],"sourceRoot":""}